(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1870:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1891),i=n(1934),r=n(1968),l=n(1873);t.default=function(e){return l.isMobileDevice()?o.createElement(r.default,Object.assign({},e,{childNode:a.default})):o.createElement(r.default,Object.assign({},e,{childNode:i.default}))}},1873:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(51),a=n(72),i=n(495),r=n(1880),l=n(59),s=n(487),c=n(489);t.preloadImage=function(e,t,n,i){var r=0,l=[],s=n.filter(function(t){return t.pageID===e});s&&s.forEach(function(e){var n,s,c,u=e.target;if(u!==a.backLink){var d=o.getPage(t,u);d.isLoaded||(r+=1,n=d,s=new Image,c=function(){0==(r-=1)&&i(l)},s.src=n.imageURL,s.onload=function(){l.push(n._id),c()},s.onerror=function(){c()})}})},t.parseAnimate=function(e,t){var n={first:"",next:""};if(e){var o=e.animate;if(o){var a=i.animateName[o.animation];if(a){var r=i.animateTypes[a].css;if(r){var l=r.first,s=r.next;l&&"overlay"!==o.action&&(n.first="animate-general "+l),s&&(n.next="animate-general "+s),t&&(n.next="animate-general "+i.animateTypes[t].reverseCss.next)}}}}return n},t.isMobileDevice=function(){return null!==navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i)},t.calcAutoScale=function(e,t,n){var o=1;if(e&&t){var a=t.getBoundingClientRect(),i=e.getBoundingClientRect();if(0!==a.height)o=(a.height-40)/(n?i.width:i.height)*100,o-=o%10,o/=100}return o},t.builderPageStyle=function(e){var n=e.appType,o=e.pageSize,i=e.aniDuration,l=e.landscape,c=e.mobileType,u=e.scale,d=o.width*u,p=o.height,f={animationDuration:i,width:d,overflow:"hidden"};if("web"===n||c===s.MOBILE_TYPE_NONE)return f;if(!t.isMobileDevice())return d=r.default.getShellInfo(c||a.MobileType.iphoneX,l).defaultScreenSize.width,d*=u,f.width=d,f;if(t.isMobileDevice()){var h=window.orientation;if(d=window.innerWidth,p=window.innerHeight,f.width=d,f.height=p,l)switch(h){case 90:break;default:f.width=p,f.height=d,f.transform="rotate(90deg) translateY(-"+d+"px)",f.transformOrigin="top left"}else switch(h){case 90:f.width=p,f.height=d,f.transform="rotate(90deg) translateY(-"+d+"px)",f.transformOrigin="top left"}}return f},t.calculateInteractionSize=function(e){var n=e.appType,o=e.mobileType,i=e.position,c=e.size,u=e.landscape,d=e.pageSize,p=d,f=e.scale;if(t.isMobileDevice()){var h=window.orientation;p={width:window.innerWidth,height:0},90===h?u||(p.width=window.innerHeight):u&&(p.width=window.innerHeight),f=p.width/d.width,p.height=d.height*f}else if("phone"===n&&o!==s.MOBILE_TYPE_NONE){f*=r.default.getShellInfo(o||a.MobileType.iphoneX,u).defaultScreenSize.width/d.width}var g=l.size.scale(l.size.transToPixed(c,d),f),m=l.point.scale(l.point.transToPixed(i,d),f);return Object.assign({left:m.x,top:m.y},g)};var u=void 0;t.calStyle=function(e,t,n,o){var a={},r={},l="",s="",c=!1;if(t&&e){var d=void 0,p=void 0,f=void 0,h=void 0;u||(u=e);var g=u.animate,m=g.animation,v=g.gesture,y=g.duration;if(!m||!v)return{firstStyle:a,nextStyle:r,firstInitCls:l,nextInitCls:s,skipToNextPage:c};d=m.indexOf("Left")>-1||m.indexOf("Up")>-1||m.indexOf("OutY")>-1||m.indexOf("OutX")>-1?-1:(m.indexOf("Right")>-1||m.indexOf("Down")>-1||m.indexOf("InY")>-1||m.indexOf("InX"),1),v.indexOf("left")>-1||v.indexOf("up")>-1?h=-1:(v.indexOf("right")>-1||v.indexOf("down")>-1)&&(h=1),v.indexOf("left")>-1||v.indexOf("right")>-1?p="deltaX":(v.indexOf("up")>-1||v.indexOf("down")>-1)&&(p="deltaY");var w=i.animateTypes[m].style,b=w.first,P=w.next,E=[];b&&(E=b.split(" "));var S=P.split(" ");m.indexOf("slide")>-1&&(f=!0);var O="firstInit"+m.substring(0,1).toUpperCase()+m.substring(1),T="nextInit"+m.substring(0,1).toUpperCase()+m.substring(1),k="firstLast"+m.substring(0,1).toUpperCase()+m.substring(1),_="nextLast"+m.substring(0,1).toUpperCase()+m.substring(1),I=void 0,x=n[p],L=d*(1-Math.abs(x/o));if(h*x<0&&(L=d),f||(I=-(d-L)),1===E.length?a[E[0]]=1-Math.abs(I):2===E.length&&(a[E[0]]=E[1]+"("+100*I+"%)"),"scale"===E[1]?a[E[0]]=E[1]+"("+(1+I)+")":"rotateY"!==S[1]&&"rotateX"!==S[1]||Math.abs(I)<=.4&&(a[E[0]]=E[1]+"("+216*I+"deg)",r.display="none"),1===S.length?r[S[0]]=1-Math.abs(L):2===E.length&&(r[S[0]]=S[1]+"("+100*L+"%)"),"scale"===S[1]?r[S[0]]=S[1]+"("+(1-L)+")":"rotateY"!==S[1]&&"rotateX"!==S[1]||Math.abs(I)>.4&&(r[S[0]]=S[1]+"("+(144*L-360)+"deg)",a.display="none"),"end"===t)if(Math.abs(d-L)>=.4){var C=y*Math.abs(d-L);a.transition="all "+C+"ms ease",r.transition="all "+C+"ms ease",l=k,s=_,c=!0,setTimeout(function(){u=null},C)}else l=O,s=T,u=null}return{firstStyle:a,nextStyle:r,firstInitCls:l,nextInitCls:s,skipToNextPage:c}},t.getGestureDirection=function(e){switch(e){case c.SWIPE_UP:case c.SWIPE_DOWN:return s.VERTICAL;case c.SWIPE_LEFT:case c.SWIPE_RIGHT:return s.HORIZONTAL;default:return""}},t.isNeedSyncAnimation=function(e,t){var n=Math.abs(e.deltaX),o=Math.abs(e.deltaY);return t===s.VERTICAL&&n<o||t===s.HORIZONTAL&&n>o},t.canScrollInMobile=function(e,t){return!(e===c.SWIPE_UP&&"goUp"===t||e===c.SWIPE_DOWN&&"goDown"===t||t===s.HORIZONTAL)},t.moveStart=function(e,n,o,a){var i=e.target,r=e.targetTouches,l=void 0,c={},u="",d=!1;r?(l=e.targetTouches[0],c={move:"touchmove",end:"touchend"}):(l=e,i=window,c={move:"mousemove",end:"mouseup"});var p=l.pageX,f=l.pageY,h={deltaX:0,deltaY:0},g=function(e){e.stopPropagation();var a=l=r?e.targetTouches[0]:e,i=a.pageX,c=a.pageY;h={deltaX:i-p,deltaY:c-f},u||(h.deltaY<0?u="goUp":h.deltaY>0&&(u="goDown"),Math.abs(h.deltaX)>Math.abs(h.deltaY)&&(u=s.HORIZONTAL)),t.canScrollInMobile(n,u)||e.preventDefault(),t.isNeedSyncAnimation(h,t.getGestureDirection(n))&&!t.canScrollInMobile(n,u)&&(d=!0,o(h))};i.addEventListener(c.move,g),i.addEventListener(c.end,function e(){d&&a(h),i.removeEventListener(c.move,g),i.removeEventListener(c.end,e)})},t.validatePageExist=function(e,t){return!!o.getFlattenPages(e).find(function(e){return e.source===a.interactionTypes.sketch?e._id===t||e.clientID===t:e._id===t})}},1875:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.default=o.createContext({})},1876:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);n(1916);var a=o.memo(function(e){return e.dataURL?o.createElement("iframe",{className:"axure-page",src:e.adjustBodyPosition?e.dataURL+"?fromIDocApp=1":e.dataURL,style:{pointerEvents:e.preventEvents?"none":"unset"}}):null});t.default=a},1879:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1892),r=n(1924),l=n(1875),s=n(1873),c=n(59),u=n(72),d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.parseInteractions=function(){var e=n.props,t=e.interactions,o=e.firstPage,a=[],i=[],r=[];if(o&&t){var l=o.clipArea,s=o.size,u=l.top,d=l.bottom,p=u*s.height,f=d*s.height,h={x:0,y:0,width:s.width,height:p},g={x:0,y:p,width:s.width,height:s.height-p-f},m={x:0,y:s.height-f,width:s.width,height:f};t.forEach(function(e){var t=c.size.transToPixed(e.size,s),n=c.point.transToPixed(e.position,s),o=c.rect.init(n,t);c.rect.contains(h,o)&&a.push(e),c.rect.intersectRect(g,o)&&r.push(Object.assign({},e,{position:Object.assign({},e.position,{y:e.position.y-u})})),c.rect.intersectRect(m,o)&&i.push(Object.assign({},e,{position:Object.assign({},e.position,{y:e.position.y+d-1})}))})}return{top:a,center:r,bottom:i}},n.renderInteractions=function(e,t){if(!e||0===e.length)return null;var o=n.props,i=o.firstPage,l=o.scale,s=o.options,c=o.isFadeIn,u=o.appType,d=o.onLinkFadeInEnd,p=o.onLinkClick,f=o.nextPage,h=o.onLinkPan,g=o.onLinkPanDone,m=o.panState,v=o.overlayPage,y=n.state.showInteractions;return!s||!e||!i||f&&!m||t||y?null:a.createElement(r.default,{interactions:e,appType:u,scale:l,fadeIn:c,page:i,options:s,onInteractionClick:p,onInteractionPan:h,onInteractionPanDone:g,onFadeInEnd:d,overlayPage:v})},n.state={showInteractions:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"componentWillReceiveProps",value:function(){this.setState({showInteractions:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.firstPage,o=t.nextPage,r=t.overlayPage,l=t.appType,c=t.scale,u=t.onAnimationEnd,d=t.options,p=t.overlayAnimation,f=t.panState,h=t.delta,g=t.onTransitionEnd;if(!n)return null;var m=d.mobileType,v=o;r&&(v=r);var y=s.parseAnimate(v,p),w=y.first,b=y.next,P=(v?v.animate:{animation:"",duration:0,noStyle:!1})||{animation:"none",duration:0,noStyle:!1},E=P.animation,S=P.duration,O=P.noStyle,T=("none"===E?1:S||0)+"ms",k=n.size,_=n.landscape,I=k,x=s.builderPageStyle({appType:l,pageSize:I,aniDuration:T,landscape:_,mobileType:m,scale:c}),L=x.width,C=this.parseInteractions();(f&&!r||!p&&O)&&(w="",b="");var D=s.calStyle(o,f,h,L),M=D.firstStyle,A=D.nextStyle,N=D.firstInitCls,j=D.nextInitCls,R=D.skipToNextPage;return a.createElement("div",null,a.createElement(i.default,{style:Object.assign({},x,M),className:["first-page",w,N],key:"first_"+(n&&n._id),page:n,topChildren:this.renderInteractions(C.top,r),centerChildren:this.renderInteractions(C.center,r),bottomChildren:this.renderInteractions(C.bottom,r)}),a.createElement(i.default,{className:["next-page",b,j],key:"next_"+(o&&o._id),style:Object.assign({animationDuration:T,overflow:"hidden",width:s.isMobileDevice()?"100%":L},A),page:o,onAnimationEnd:u,onTransitionEnd:function(){g(R)}}),a.createElement(i.default,{className:["overlay-page",b],key:"overlay_"+(r&&r._id),isOverlay:!!r,style:{animationDuration:T,overflow:"hidden",width:L},page:r,onAnimationEnd:function(t){t.stopPropagation(),e.setState({showInteractions:!1})},topChildren:this.renderInteractions(C.top),centerChildren:this.renderInteractions(C.center),bottomChildren:this.renderInteractions(C.bottom)}))}}]),t}();d.defaultProps={isFadeIn:!0,appType:"phone",scale:1,nextPage:null,firstPage:null,overlayPage:null,interactions:[],onLinkClick:null,onLinkFadeInEnd:null,onAnimationEnd:null,overlayAnimation:"",onLinkPan:null,onLinkPanDone:null,panState:"",delta:null,onTransitionEnd:null,options:{alwaysShowLinkArea:!1,mobileType:u.MobileType.iphoneX,showControllerPanel:!0,showLinkAreaWhenHovered:!0,showToolbar:!0,autoScreen:!1}},t.default=function(e){return a.createElement(l.default.Consumer,null,function(t){var n=t.onAnimationEnd,o=t.onTransitionEnd,i=t.onLinkClick,r=t.onLinkFadeInEnd,l=t.onLinkPan,s=t.onLinkPanDone;return a.createElement(d,Object.assign({},e,{onAnimationEnd:n,onTransitionEnd:o,onLinkClick:i,onLinkFadeInEnd:r,onLinkPan:l,onLinkPanDone:s}))})}},1880:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(72),i=f(n(1893)),r=f(n(1894)),l=f(n(1895)),s=f(n(1896)),c=f(n(1897)),u=f(n(1898)),d=f(n(1899)),p=f(n(1900));function f(e){return e&&e.__esModule?e:{default:e}}var h={},g=function(e){var t=e.width;return{width:e.height,height:t}},m=function(e){var t=e.defaultScreenSize,n=e.shellSize,o=e.screenBounds,a=o.left,i=o.top,r=o.width,l=o.height;return{defaultScreenSize:g(t),shellSize:g(n),screenBounds:{left:i,width:l,height:r,top:n.width-a-r}}};h[a.MobileType.iphoneX]={defaultScreenSize:{width:375,height:812},shellImage:{landscape:r.default,portrait:i.default},shellSize:{width:1295,height:2590},screenBounds:{left:83,top:77,width:1125,height:2436}},h[a.MobileType.iphone]={defaultScreenSize:{width:375,height:667},shellImage:{landscape:s.default,portrait:l.default},shellSize:{width:871,height:1776},screenBounds:{left:61,top:219,width:750,height:1334}},h[a.MobileType.android]={defaultScreenSize:{width:360,height:640},shellImage:{landscape:u.default,portrait:c.default},shellSize:{width:1204,height:2458},screenBounds:{left:62,top:252,width:1080,height:1920}},h[a.MobileType.pad]={defaultScreenSize:{width:768,height:1024},shellImage:{landscape:p.default,portrait:d.default},shellSize:{width:1762,height:2496},screenBounds:{left:112,top:225,width:1537,height:2049}},t.default={getShellInfo:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=h[e];if(n){var a=o({},h[e]);if(a){var i=a,r=i.shellImage;t&&(a=m(a));var l=a,s=l.defaultScreenSize,c=l.shellSize,u=l.screenBounds;return{defaultScreenSize:s,shellSize:c,screenBounds:u,shellImage:t?r.landscape:r.portrait}}}return null}}},1884:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ifShowHugePage=t.getBigPageRect=t.getBigPageParts=t.getViewPortRect=t.getParentGroups=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=function(e,t){var n=t.movingPagesID,a=t.movingPageDelta,i=t.localStatePages,r=t.selectedPages,l=t.selectingPages,s=t.states;return function(e,t,n,a,i){return p(n),p(a),i.forEach(function(i){var r=i._id,l=i.pages,s=void 0===l?[]:l;if(s.length){var c=s[0];if(c){var u=e.find(function(e){return e._id===c._id});if(u){u.stateID=r,u.guidePage=u;var p=null,f=null;if(n.length?f=d(u,s,n):a.length&&(f=d(u,s,a)),f)p=f;else{var h=(t[r]||{}).currentPage;h&&s.find(function(e){return!!e&&e._id===h._id})&&(p=h)}(p=p?e.find(function(e){return e._id===p._id}):u).guidePage=u,u.currentPage=p,t[r]=u;var g=s.map(function(t,n){if(n&&t){var a=t._id,i=e.findIndex(function(e){return e._id===a}),l=e.splice(i,1);return o({},l[0],{stateID:r,guidePage:u,position:u.position})}return u});u.groupPages=g}}}}),e}(function(e){for(var t=[],n=0,a=e.length;n<a;n+=1){var i=e[n];i.children?t.push(o({},i,{children:i.children,groupPages:[],guidePage:null})):t.push(o({},i,{groupPages:[],guidePage:null}))}return t}(e.map(function(e){return n.indexOf(e._id)>-1&&a?o({},e,{position:{x:e.position.x+a.x,y:e.position.y+a.y}}):e})),i,r||[],l||[],s||[])},t.findParentGroup=f,t.findPageLevel=function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{levels:[]};var a=o;a.flag=t.some(function(t){if(t.isGroup){var i=e(t.children,n,o);return i.flag&&i.levels.push(t),i.flag}if(t.children){var r=e(t.children,n,o);return r.flag}return t._id===n&&(a.levels.push(t),!0)});return a},t.isExistInGroup=function e(t,n){if(!n)return!1;return t.some(function(t){var o=t._id,a=t.children;return a&&a.length?e(a,n):o===n._id})},t.inArrayFind=function e(t,n){var o=null;for(var a=0,i=t.length;a<i;a+=1){var r=t[a];if(n(r))return r;var l=r.children;if(l&&l.length&&(o=e(l,n)),o)return o}return null},t.getPageDisplay=h,t.diffSelecedGroupsTransform=function(e,t,n,o){var a=t.scale,l=t.nodeBound,s=t.style,c=o?e:(0,r.getFlattenPages)(e);if(!c.length)return s;c=c.reduce(function(e,t){var o=t._id,a=n.find(function(e){var t=e.currentPage,n=void 0===t?e:t;return n._id===o});return a&&e.push(a),e},[]);var u=(0,i.getPagesBoundingRect)(c,a),d=u.left+u.width/2,p=u.top+u.height/2,f={left:-d+l.width/2,top:-p+l.height/2};if(c.some(function(e){return h(l,e,f,a,-50)}))return u.height>l.height&&(f.top-=(l.height-u.height-40)/2),f;var g=function(e,t,n,o){var a=e.left,i=e.top,r=a,l=i,s=Math.min(e.width,t.width),c=Math.min(e.height,t.height),u=r+e.width,d=l+e.height,p={right:r+s,bottom:l+u},f=[];for(;p.right<=u&&p.bottom<=d;){if(f.push(y(n,t,{left:-r,top:-l},o)),p.right===u){if(r=a,p.bottom===d)break;p.bottom+100>d?l=d-c:l+=d}else p.right+100>u?r=u-s:r+=100;p={right:r+s,bottom:l+c}}var h=null,g=0;return f.forEach(function(e){e.length>g&&(g=e.length,h=e)}),h}(u,l,c,a);if(g&&g.length){var m=(0,i.getPagesBoundingRect)(g,a),v=m.left+m.width/2,w=m.top+m.height/2;f={left:-v+l.width/2,top:-w+l.height/2}}return f};var a=n(228),i=n(1914),r=n(51),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(59)),s=n(488),c=n(490),u=n(28);n(120);function d(e,t,n){return n.find(function(n){var o=n._id;return t.some(function(t){return!!t&&(t._id===o&&(n.guidePage=e,n.stateID=e.stateID,!0))})})}function p(e){e.length&&e.forEach(function(e){delete e.stateID,delete e.guidePage,delete e.pageId,delete e.groupPages,delete e.currentPage})}function f(e,t){return function e(t,n,o){for(var a=null,i=0,r=t.length;i<r;i+=1){var l=t[i];if(l.isGroup?a=e(l.children,n,l):l.children&&l.children.length&&(a=e(l.children,n,o)),l._id===n)return o;if(a)return a}return a}(e,t)}t.getParentGroups=function(e,t){var n=t.map(function(t){return f(e,t._id)});return n.some(function(e){return void 0===e})?[]:n.reduce(function(e,t){return!e.includes(t)&&t&&e.push(t),e},[])};function h(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=o*(0,a.getPageScale)(t,"storyboard"),s=g(e,n,i),c=m(t,r,o);return l.rect.intersectRect(c,s)}var g=t.getViewPortRect=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e)return null;var o=t.top,a=t.left;return{left:-a-n,top:-o-n,right:-a+e.width+n,bottom:-o+e.height+n}},m=function(e,t,n){var o=e.currentPage,a=void 0===o?e:o,i=e.position,r=a.size,l=(0,s.getPageRectTopOffset)(n);return{left:i.x*n,top:i.y*n-l,right:i.x*n+r.width*t,bottom:i.y*n+r.height*t-l}},v=(t.getBigPageParts=function(e,t,n,i){var r=t.parts,u=(0,a.getPageScale)(t,i)*n,d=v(t,u,n,i);return r.map(function(t){var a=0===t.position.y&&i===c.AppWorkMode.Storyboard?(0,s.getPageRectTopOffset)(n):0,r={left:d.left+t.position.x*u,top:d.top+t.position.y*u+a,right:d.left+(t.position.x+t.size.width)*u,bottom:d.top+(t.position.y+t.size.height)*u};return o({},t,{show:l.rect.intersectRect(r,e)})})},t.getBigPageRect=function(e,t,n,o){if(o===c.AppWorkMode.Storyboard)return m(e,t,n);if(o===c.AppWorkMode.Preview)return{left:0,top:0,right:e.size.width*t,bottom:e.size.height*t};var a=document.querySelector(".c-workspace"),i=document.querySelector(".common-page");if(!a||!i)return{left:0,top:0,right:0,bottom:0};var r=i.getBoundingClientRect(),l=a.getBoundingClientRect();return{left:r.left-l.left,top:r.top-l.top,right:r.left-r.width,bottom:r.top-l.height}});t.ifShowHugePage=function(e){if((0,u.getDevicePixelRatio)()>1){if(e>.25)return!0}else if(e>.5)return!0;return!1};function y(e,t,n,o){return e.reduce(function(e,a){return h(t,a,n,o)&&e.push(a),e},[])}},1885:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1927);n(1928);var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.doExpandAllNode=function(e){return e.map(function(e){var t=Object.assign({},e,{expand:!0});return t.children&&t.children.length&&(t.children=n.doExpandAllNode(t.children)),t})},n.handleNodeExpandChange=function(e){if(n.props.canExpand){var t=e;t.expand=!t.expand;var o=n.state.data,a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(o));n.setState({data:a})}},n.handleNodeSelected=function(e){if(e._id&&!e.isGroup){var t=n.props.onPageSelected;t&&t(e._id)}},n.renderLinks=function(){var e=n.props.links;return e?a.createElement("div",{className:"links-container"},e.map(function(e){return a.createElement("div",{className:"tree-node"},a.createElement("div",{className:"tree-node-title link",onClick:function(t){t.stopPropagation(),n.handleNodeSelected(e)}},a.createElement("span",null,e.name)))})):null};var o=n.doExpandAllNode(e.data);return n.state={data:o},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.selectedID,o=t.cls,r=t.downArrowShow,l=this.state.data;return a.createElement("div",{className:"preview-tree-wrap "+o},this.renderLinks(),l&&l.map(function(t){return a.createElement(i.default,{key:t._id,page:t,downArrowShow:r,selID:n,onExpand:e.handleNodeExpandChange,onSelected:e.handleNodeSelected})}))}}]),t}();r.defaultProps={selectedID:"",onPageSelected:null,canExpand:!0,cls:"",downArrowShow:!0},t.default=r},1886:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="https://idoc.mockplus.cn";n(28).isZh||(o="https://idoc.mockplus.com");var a={homepage:o,privateDeployment:{tutorial:"/help",pluginsDownload:"/download",viewSliceTutorialsURL:"/help/p/269",sliceHelpURL:"/help/p/269",imageSliceViewTutorialsLink:"/help/p/269",xdSliceViewTutorialsLink:"/help/p/233",psSliceViewTutorialsLink:"/help/p/231",sketchSliceViewTutorialsLink:"/help/p/232","axure-htmlSliceViewTutorialsLink":"/help/p/234",mockplusSliceViewTutorialsLink:"/help/p/245",imageSliceTutorialsDownloadLink:"/download",xdSliceTutorialsDownloadLink:"/download",psSliceTutorialsDownloadLink:"/download",sketchSliceTutorialsDownloadLink:"/download","axure-htmlSliceTutorialsDownloadLink":"/download",mockplusSliceTutorialsDownloadLink:"/download",customSizeTutorial:"/help/p/272",adaptionTutorial:"/help/p/270",ios3xTutorial:"/help/p/271",helpLink:"/help/p/282",rpHintLinkUrl:"/help/p/284",memberAuthorityLink:"/help/p/288"}};t.default=a},1891:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(163),r=n(10),l=n(1879),s=n(1885),c=n(1929),u=n(105),d=n(1932);n(1933);var p=n(227),f=n(1876),h=70,g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleWindowTouchStart=function(){(0,n.props.onLinkAreaFadeInStart)()},n.handleToggleTree=function(){var e=n.state.showTree;n.setState({showTree:!e})},n.handleBallTouchStart=function(e){e.stopPropagation();var t=e.target,o=n.state.ballPoint,a=e.nativeEvent.targetTouches[0],i=a.pageX,r=a.pageY;n.setState({active:!0});var l=function(e){e.stopPropagation(),e.preventDefault();var t=e.targetTouches[0],a=t.pageX,l=t.pageY,s=a-i,c=l-r,u={right:o.right-s,bottom:o.bottom-c};n.setState({ballPoint:u})};t.addEventListener("touchmove",l),t.addEventListener("touchend",function e(){var o=n.state.ballPoint,a=window.innerWidth-h,i=window.innerHeight-h,r=o.right>0,s=Object.assign({},o);o.right<=h/4&&(s.right=-h/2),o.right>a&&(s.right=a),o.bottom<0&&(s.bottom=0),o.bottom>i&&(s.bottom=i),n.setState({active:r,ballPoint:s}),t.removeEventListener("touchmove",l),t.removeEventListener("touchend",e)})},n.state={showTree:!1,ballPoint:{right:-h/2,bottom:h},active:!1,showGuide:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("touchstart",this.handleWindowTouchStart)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("touchstart",this.handleWindowTouchStart)}},{key:"render",value:function(){var e=this.props,t=e.currentPage,n=e.loaded,o=e.app,l=e.onPageSelected,d=e.needPerspective,f=e.redirectTo,h=e.onMobileToggleTree,g=e.onMobileTouchStart,m=e.onMobileTouchMove,v=e.onMobileTouchEnd,y=e.showPhoneTree,w=this.state,b=w.active,P=w.ballPoint,E=w.showTree,S=(w.showGuide,n?o.children:null),O=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),T=-1!==window.location.href.indexOf("phoneUrl=true");if(O&&!T){var k=o.shareID;if(!sessionStorage.getItem("fromGuide"))return f("/run/"+k+"/guide/firstStep"),null}return a.createElement("div",{className:r.default("mobile-container",{perspective:d,childIsIframe:o.source===p.AppSource.Axure||o.source===p.AppSource.Mockplus}),onTouchStart:g,onTouchMove:m,onTouchEnd:v},this.renderPageContent(),T?a.createElement("div",{className:r.default("tree-panel",{show:y,hide:!y}),onClick:h},S&&a.createElement(c.default,{data:S,homePageId:o.homepage,groupCount:o.groupCount,pageCount:o.pageCount,name:o.name,selectedID:t?t._id:null,onPageSelected:l})):a.createElement("div",{className:r.default("tree-panel",{show:E,hide:!E}),onClick:this.handleToggleTree},S&&a.createElement(s.default,{data:S,selectedID:t?t._id:null,onPageSelected:l})),!T&&i.createPortal(a.createElement("div",{style:P,className:r.default("controller-ball",{active:b}),onClick:this.handleToggleTree,onTouchStart:this.handleBallTouchStart},a.createElement(u.Icon,{cls:"demo_control",size:"3.6rem"})),document.body))}},{key:"renderPageContent",value:function(){var e=this.props,t=e.interactions,n=e.currentPage,o=e.nextPage,i=e.linkFadeIn,r=e.overlayPage,s=e.overlayAnimation,c=e.preview,u=e.app;return n?u.source===p.AppSource.Axure?a.createElement(f.default,{dataURL:n.dataURL,preventEvents:!1,adjustBodyPosition:!1}):a.createElement(l.default,{appType:d.AppType.phone,interactions:t,firstPage:n,nextPage:o,overlayPage:r,isFadeIn:i,panState:c.panState,delta:c.delta,overlayAnimation:s}):null}}]),t}();g.defaultProps={app:null,interactions:null,currentPage:null,nextPage:null,overlayPage:null,loaded:!1,linkFadeIn:!0,onLinkAreaFadeInStart:null,onPageSelected:null,needPerspective:!1,overlayAnimation:"",preview:null},t.default=g},1892:function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(105),l=n(487),s=n(1875),c=n(1873),u=n(1901);n(1923);var d=n(490),p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.pageDiv=i.createRef(),n.onMoveStart=function(e){var t=n.props,o=t.page,a=t.onPagePan,i=t.onPagePanDone,r=t.isOverlay,l=o.onLoaded.gesture,s=!l||-1===l.indexOf("swipe")||r||-1!==e.target.className.indexOf("link-hot");c.moveStart(e,l,function(e){s||a(e)},function(e){s||i(e)})},n.setTimming=function(e){n.isTiming=e},n.handlePageGesture=function(e,t,o){e&&!n.isTiming?(n.setTimming(!0),setTimeout(function(){n.setTimming(!1),o(t.type)},e)):n.isTiming||o(t.type)},n.isTiming=!1,n.handleOnScroll=n.handleOnScroll.bind(n),n.state={scrollLeft:0,scrollTop:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"componentDidMount",value:function(){var e=this;if(this.pageDiv.current){var t=new Hammer(this.pageDiv.current),n=this.props,o=n.onPageGesture,a=n.page,i=n.isOverlay,r=n.pageWhetherExist,s=a.onLoaded,u=s.delay,d=s.target,p=s.gesture;if(r(d)&&(t.get("swipe").set({velocity:.1}),p)){if("doubleClick"===p)return void t.on("tap",function(t){-1===t.target.className.indexOf("link-hot")&&2===t.tapCount&&e.handlePageGesture(u,t,o)});var f=p;p.indexOf("swipe")>-1&&(c.getGestureDirection(p)===l.VERTICAL&&t.get("swipe").set({direction:Hammer.DIRECTION_ALL}),i||(p="pan")),t.on(""+p,function(t){-1===t.target.className.indexOf("link-hot")&&f===p&&e.handlePageGesture(u,t,o)})}}}},{key:"componentDidUpdate",value:function(e){var t=this.props.page;!this.scrollNode||e.page&&t._id===e.page._id||(this.scrollNode.scrollTop(0),this.scrollNode.scrollLeft(0))}},{key:"handleOnScroll",value:function(){this.scrollNode&&this.setState({scrollTop:this.scrollNode.getScrollTop(),scrollLeft:this.scrollNode.getScrollLeft()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.page,a=t.className,l=t.onAnimationEnd,s=t.topChildren,c=t.bottomChildren,p=t.centerChildren,f=t.onTransitionEnd;if(n){var h=this.props.style||{},g=["preview-page"];if(a)if(Array.isArray(a))g=g.concat(a);else if("string"==typeof a)g.push(a);else if("object"===(void 0===a?"undefined":o(a))){Object.keys(a).forEach(function(e){g.push(a[e])})}var m=h.width,v=n.clipArea,y=n.size,w=(v?v.top:0)*y.height,b=(v?v.bottom:0)*y.height,P=y.height-w-b,E=m?m/y.width:1,S=Math.round(w*E),O=Math.round(b*E),T=Math.round(P*E),k=this.centerDiv?this.centerDiv.getBoundingClientRect().height:0;return i.createElement("div",{onAnimationEnd:l,onTransitionEnd:f,style:Object.assign({},h),onTouchStart:this.onMoveStart,onMouseDown:this.onMoveStart,className:g.join(" "),ref:this.pageDiv},S>0&&i.createElement("div",{className:"page-fragment top-fragment",style:{width:m,height:S}},i.createElement(u.default,{page:n,zoom:E,scale:E,containerHeight:S,containerWidth:m,scrollLeft:0,scrollTop:0,mode:d.AppWorkMode.Preview,viewPortRect:{left:0,top:0,right:m,bottom:S}},s)),i.createElement("div",{ref:function(t){e.centerDiv=t},className:"page-fragment center-fragment",style:{flex:1}},i.createElement(r.ScrollView,{setRef:function(t){e.scrollNode=t},onScroll:this.handleOnScroll},i.createElement("div",{className:"center-content",style:{width:m,height:T}},i.createElement(u.default,{page:n,zoom:E,scale:E,containerHeight:T,containerWidth:m,scrollLeft:0,scrollTop:0,style:{top:-S},mode:d.AppWorkMode.Preview,viewPortRect:{left:0,top:S+this.state.scrollTop,right:m,bottom:S+this.state.scrollTop+k},isPreviewPage:!0},p)))),O>0&&i.createElement("div",{className:"page-fragment bottom-fragment",style:{width:m,height:O}},i.createElement(u.default,{page:n,zoom:E,scale:E,containerHeight:O,containerWidth:m,scrollLeft:0,scrollTop:0,isPreviewPage:!0,mode:d.AppWorkMode.Preview,viewPortRect:{left:0,top:S+T,right:m,bottom:S+T+O}},c)))}return null}}]),t}();p.defaultProps={page:null,className:null,style:null,onAnimationEnd:null,topChildren:null,bottomChildren:null,centerChildren:null,onPageGesture:null,onTransitionEnd:null,onPagePan:null,onPagePanDone:null,isOverlay:!1,pageWhetherExist:null},t.default=function(e){return i.createElement(s.default.Consumer,null,function(t){var n=t.onPagePan,o=t.onPagePanDone,a=t.onPageGesture,r=t.pageWhetherExist;return i.createElement(p,Object.assign({},e,{onPagePan:n,onPagePanDone:o,onPageGesture:a,pageWhetherExist:r}))})}},1893:function(e,t,n){e.exports=n.p+"assets/portrait.4fe0a793df2cf3e8cd354d23e6dd52fc.svg"},1894:function(e,t,n){e.exports=n.p+"assets/landscape.d5c42224fb956abee998a3eb82df7326.svg"},1895:function(e,t,n){e.exports=n.p+"assets/portrait.b5f1b3bd51a67f521d23f88af88cff91.svg"},1896:function(e,t,n){e.exports=n.p+"assets/landscape.ce4511525fab7b4428567a437b382cc0.svg"},1897:function(e,t,n){e.exports=n.p+"assets/portrait.0d6c710e27ffcfedaec4a4549a507043.svg"},1898:function(e,t,n){e.exports=n.p+"assets/landscape.ae453263c4c909bffd520ec9d6352c15.svg"},1899:function(e,t,n){e.exports=n.p+"assets/portrait.42374cb872698581765e1ef497c4f8f2.svg"},1900:function(e,t,n){e.exports=n.p+"assets/landscape.23e899148df0b5e8531bd80e98d59036.svg"},1901:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1902),i=n(1876),r=n(1917);n(1922);var l=function(e){var t=e.page,n=e.zoom,l=e.children,s=e.containerHeight,c=e.containerWidth,u=e.scrollTop,d=e.scrollLeft,p=(e.saveCanvasParts,e.isPreviewPage),f=e.style,h=e.scale,g=e.mode;return"axure"===t.type?o.createElement("div",{className:"common-page",style:{width:Math.round(t.size.width*n),height:Math.round(t.size.height*n)}},o.createElement("div",{className:"special-page-wrapper",style:{width:t.size.width,height:t.size.height,transform:"scale("+e.zoom+")",transformOrigin:"top left"}},o.createElement(i.default,{dataURL:t.dataURL,preventEvents:!0,adjustBodyPosition:!0})),l):"mockplus"===t.type?o.createElement("div",{className:"common-mk-page",style:{width:Math.round(t.size.width*n),height:Math.round(t.size.height*n)}},o.createElement("div",{className:"special-page-wrapper",style:{width:t.size.width,height:t.size.height,transform:"scale("+e.zoom+")",transformOrigin:"top left"}},o.createElement(r.default,{ID:t._id,page:t,scale:e.zoom,isInApp:e.isInApp})),l):o.createElement(o.Fragment,null,o.createElement("div",{className:"common-page",style:Object.assign({width:Math.round(t.size.width*n),height:Math.round(t.size.height*n)},f)},o.createElement(a.default,{imageURL:t.imageURL.replace(/http\:\/\/mockplus-static\.oss-cn-hangzhou\.aliyuncs\.com\//gi,"https://img02.mockplus.cn/"),containerHeight:s,containerWidth:c,scrollLeft:d,scrollTop:u,zoom:n,scale:h,isCutted:t.isCutted,parts:t.parts,size:t.size,page:t,mode:g,viewPortRect:e.viewPortRect}),!p&&l),p&&l)};l.defaultProps={isInApp:!0,isPreviewPage:!1,style:{}},t.default=l},1902:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1903),r=n(1913),l=n(1884),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.PureComponent),o(t,[{key:"render",value:function(){var e=this.props,t=e.isCutted,n=e.imageURL,o=e.zoom,s=e.size,c=e.scale,u=e.page,d=e.mode,p=(e.containerWidth,e.containerHeight,e.scrollLeft,e.scrollTop,this.props.saveCanvasParts,l.ifShowHugePage(o));return t&&p?a.createElement(r.default,{page:u,zoom:o,scale:c,mode:d,viewPortRect:this.props.viewPortRect}):a.createElement(i.default,{key:n,imageURL:n,zoom:o,isBigImg:s.width>1e4||s.height>1e4,canLoadThumb:s.width*s.height>1e6})}}]),t}();s.defaultProps={isCutted:!1},t.default=s},1903:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(120),r=n(35),l=n(1904),s=function(e,t,n){if(n){var o=Math.min(t,.5);return c(e,o)}return c(e,t)},c=function(e,t){if(r.getDevicePixelRatio()>1){if(t<=.25)return i.getStyledImage(e,"!thumb-p-50")}else{if(t<=.25)return i.getStyledImage(e,"!thumb-p-25");if(t<=.5)return i.getStyledImage(e,"!thumb-p-50")}return e},u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onTargetImageLoaded=function(){n.setState({showTargetImage:!0})},e.canLoadThumb?n.state={showTargetImage:!1,targetImageURL:s(e.imageURL,e.zoom,e.isBigImg)}:n.state={showTargetImage:!0,targetImageURL:e.imageURL},n.debouncedLoadNewImage=l(n.loadNewImage,500),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.PureComponent),o(t,[{key:"componentDidUpdate",value:function(e,t){e.imageURL!==this.props.imageURL?this.loadNewImage():this.debouncedLoadNewImage()}},{key:"loadNewImage",value:function(){var e=this.props,t=e.imageURL,n=e.zoom,o=e.canLoadThumb,a=e.isBigImg,i=o?s(t,n,a):t;i!==this.state.targetImageURL&&this.setState({targetImageURL:i,showTargetImage:!1})}},{key:"render",value:function(){var e=this.state.targetImageURL,t=this.state.showTargetImage,n=i.getStyledImage(this.props.imageURL,"!thumb-p-25"),o=this.props.imageURL,l=!this.state.showTargetImage,s=-1!==o.indexOf(".svg")&&r.isIE;return a.createElement(a.Fragment,null,a.createElement("img",{key:o+"-thumb",src:n,style:{display:l&&!s?"block":"none"}}),s?a.createElement("div",{className:"sgv-content",style:{backgroundImage:"url("+o+")",backgroundSize:"contain",backgroundRepeat:"no-repeat",width:"100%",height:"100%",position:"absolute"}}):a.createElement("img",{key:o+"-target",src:e,style:{display:t?"block":"none"},onLoad:this.onTargetImageLoaded}))}}]),t}();t.default=u},1913:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(10),r=n(1884),l=n(120);n(1915);var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={imgShowList:e.page.parts.map(function(){return{thumbShow:!0}})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"componentDidMount",value:function(){this.loadNewImg()}},{key:"componentDidUpdate",value:function(e){this.props.page._id!==e.page._id&&this.loadNewImg()}},{key:"loadNewImg",value:function(){var e=this.props.page;this.setState({imgShowList:e.parts.map(function(){return{thumbShow:!0}})})}},{key:"onTargetImageLoaded",value:function(e){var t=this.state.imgShowList;this.setState({imgShowList:t.map(function(t,n){return e===n?{thumbShow:!1}:t})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.page,o=t.zoom,s=t.scale,c=t.mode,u=t.viewPortRect,d=this.state.imgShowList;if(!u||!n||!n.parts)return null;var p=r.getBigPageParts(u,n,s,c);return a.createElement("div",{className:i.default("c-huge-page")},p.map(function(t,n){return t.show?a.createElement(a.Fragment,null,a.createElement("img",{class:i.default("huge-img"),key:t.imageURL+"-thumb",src:l.getStyledImage(t.imageURL,"!thumb-p-25"),style:{position:"absolute",left:t.position.x*o,top:t.position.y*o,width:t.size.width*o,height:t.size.height*o,display:d[n]&&d[n].thumbShow?"block":"none"}}),a.createElement("img",{class:i.default("huge-img"),key:t.imageURL+"-target",src:t.imageURL,style:{position:"absolute",left:t.position.x*o,top:t.position.y*o,width:t.size.width*o,height:t.size.height*o,display:d[n]&&d[n].thumbShow?"none":"block"},onLoad:function(t){e.onTargetImageLoaded(n)}})):null}))}}]),t}();t.default=s},1914:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(59),a=n(228),i=n(488),r=n(60),l=n(491),s=n(28),c={width:200,height:130};t.mapBound=c;t.getStoryboardBound=function(){return{width:12e3,height:12e3}};var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={width:0,height:0,left:0,top:0,right:0,bottom:0};if(e.length>0){var o=a.getPageScale(e[0],"storyboard");n.left=e[0].position.x,n.top=e[0].position.y,n.right=n.left+e[0].size.width*o,n.bottom=n.top+e[0].size.height*o,e.forEach(function(e){var t=e.size,o=e.position,i=a.getPageScale(e,"storyboard");n.left=Math.min(n.left,o.x),n.top=Math.min(n.top,o.y),n.right=Math.max(n.right,o.x+t.width*i),n.bottom=Math.max(n.bottom,o.y+t.height*i)})}return{width:(n.right-n.left)*t,height:(n.bottom-n.top)*t,left:n.left*t,top:n.top*t,right:n.right*t,bottom:n.bottom*t}};t.getPagesBoundingRect=u;var d=function(e,t){var n=t.getBoundingClientRect(),o=e.bottom,a=e.height,i=e.left,r=e.right,l=e.top,s=e.width;return{bottom:o+n.height,height:a+2*n.height,left:i-n.width,right:r+n.width,top:l-n.height,width:s+2*n.width}};t.getPagesBoundingRectWithStoryboard=d;var p=function(e){var t=c.width,n=c.height;return Math.min(t/e.width,n/e.height)};t.getMapScale=p;var f=function(e,t){var n=e.width*t,o=e.height*t,a=0-e.left*t,i=0-e.top*t;return Math.abs(o-c.height)<1?a+=(c.width-n)/2:i+=(c.height-o)/2,{x:a,y:i}};t.getMapOffset=f;t.getNavStyle=function(e){var t=e.pages,n=e.scale,o=e.offset,a=e.storyboardDom,i=a.getBoundingClientRect(),r=u(t,n);r=d(r,a);var l=p(r),s=f(r,l),c={width:i.width*l,height:i.height*l};return{left:s.x-o.x*l,top:s.y-o.y*l,width:c.width,height:c.height}};t.isOutOfBound=function(e){var t=e.pages,n=e.moveX,a=e.moveY,i=e.delta,r=e.scale,l=e.boardBoundingRect,s=e.offset,c=void 0,d=void 0;s?(c=s.x,d=s.y):(c=n+i.x,d=a+i.y);var p=u(t,r),f={x:0,y:0,left:0,top:0,right:l.width,bottom:l.height,width:l.width,height:l.height},h=p.left,g=p.top,m=p.right,v=p.bottom,y={width:p.width,height:p.height,x:h+c,y:g+d,left:h+c,top:g+d,right:m+c,bottom:v+d};return!o.rect.intersectRect(f,y)};t.getSelectingPages=function(e){var t=e.pages,n=e.selectRect,r=e.boardOffset,l=e.scale;return t.filter(function(e){var t=i.getTopOffset(l),s=e.size,c=e.position,u=c.x*l+r.x,d=c.y*l+r.y,p=a.getPageScale(e,"storyboard"),f={left:u,top:d-t,right:u+s.width*l*p,bottom:d+s.height*l*p-t};return o.rect.intersectRect(n,f)})};t.getSelectedPages=function(e){var t=e.selectedPages,n=e.selectingPages,o=[],a=n.map(function(e){return e._id});return t.forEach(function(e){a.indexOf(e._id)<0&&!e.isGroup&&o.push(e)}),n.forEach(function(e){o.push(e)}),o};t.setPagesEqualSpace=function(e,t){var n=0,o=0,i=0,r=e.map(function(e){var i=Object.assign({},e,{position:{x:e.position.x,y:e.position.y}}),r=a.getPageScale(e,"storyboard");return"horizontally"===t&&(o=e.position.x,n+=e.size.width*r),"vertically"===t&&(o=e.position.y,n+=e.size.height*r),{page:i,pos:o}});r.sort(function(e,t){return e.pos-t.pos});var l=r[0].page,s=r[r.length-1].page,c=a.getPageScale(l,"storyboard"),u=a.getPageScale(s,"storyboard");"horizontally"===t&&(n-=l.size.width*c+s.size.width*u,i=Math.round((s.position.x-(l.position.x+l.size.width*c)-n)/(r.length-1))),"vertically"===t&&(n-=l.size.height*c+s.size.height*u,i=Math.round((s.position.y-(l.position.y+l.size.height*c)-n)/(r.length-1)));for(var d=1;d<r.length-1;d+=1){var p=r[d].page,f=r[d-1].page,h=a.getPageScale(f,"storyboard");"horizontally"===t&&(p.position.x=f.position.x+f.size.width*h+i),"vertically"===t&&(p.position.y=f.position.y+f.size.height*h+i)}return r.map(function(e){return e.page})};var h=function(e,t,n){return e.reduce(function(e,o,a){return a>t-1?e+0:e+o+n},0)};t.setPagesAutoFlow=function(e){var t=e.filter(function(e){return!e.isGroup}),n=t.length,o=parseInt(s.getLocalStorage().getItem("autoFlowVal"))||r.AUTO_FLOW_VALUE,i=r.AUTO_FLOW_SAPACE,l=Math.ceil(n/o),c=0,u=[],d=t[0].position.x,p=t[0].position.y;t.forEach(function(e){var t=e.currentPage||e;d>t.position.x&&(d=t.position.x),p>t.position.y&&(p=t.position.y)}),t.forEach(function(e,t){var n=e.currentPage||e;c=Math.max(c,n.size.width);var a=u[Math.floor(t/o)]||0;u[Math.floor(t/o)]=Math.max(a,n.size.height)});for(var f=[],g=[],m=0;m<o;m+=1)f[m]=(c+i)*m;for(var v=0;v<l;v+=1)g[v]=h(u,v,i+r.PAGE_TITLE_HEIGHT);return t.map(function(e,t){var n=a.getPageScale(e,"storyboard");return Object.assign({},e,{position:{x:d+f[t%o]*n,y:p+g[Math.floor(t/o)]*n}})})};t.isPageSelected=function(e,t){return-1!==t.findIndex(function(t){return t._id===e._id})};t.isNoPage=function(e){return e.some(function(e){return e.isGroup})};var g=function(e){return e.isPreview||e.isReadOnly};t.isReadOnly=g;t.handleDelLine=function(e){if(!g(e)){var t=e.selectedLine,n=e.linePermission,o=e.onDeleteLink;if(n.isRemove){var a=t?t._id:null;a&&o(a)}}};t.ifIsReadOnly=function(e,t){return!(l.validatePermission(l.MODE_STORY_BOARD,l.OPERATE_ADD,e,t)&&l.validatePermission(l.MODE_STORY_BOARD,l.OPERATE_MODIFY,e,t)&&l.validatePermission(l.MODE_STORY_BOARD,l.OPERATE_REMOVE,e,t))};t.getMovedPages=function(e,t){return e.map(function(e){var n=e.guidePage||e,o=n.pageId||n._id,a=n.position,i=!e.guidePage;return Object.assign({},n,{pageID:o,position:a,mouseMovingDelta:t,isAppend:i})})},t.isPagesSame=function(e,t){if(0===e.length&&0===t.length)return!0;if(!e.length||!t.length)return!1;var n=t.map(function(e){return e._id});return 0===e.filter(function(e){return!n.includes(e._id)}).length}},1915:function(e,t,n){},1916:function(e,t,n){},1917:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(497)({loader:function(){return Promise.resolve().then(function(){return n(1918)})},loading:n(498).default});t.default=function(e){return o.createElement(a,Object.assign({},e))}},1918:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);n(1919);var i=n(1920),r=n(492),l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.self=a.createRef(),n.doCheckInView=function(){if(n.self.current){var e=window,t=e.innerHeight,o=e.innerWidth,a=n.self.current.getBoundingClientRect(),i=a.left,r=a.top,l=a.right,s=a.bottom,c=a.width,u=a.height,d=!(i>o||l<0||r>t||s<0||0===c||0===u);d!==n.state.inView&&n.setState({inView:d})}},n.doReconstruction=function(e){if(e){var t=e.ID,o=e.name,a=e.controls,i={ID:t,name:o,size:e.size,loaded:!0,controls:[]};i.controls=function e(t){return t.map(function(t){var n={data:t,dynamicProperties:{}};return t.children&&(n.isGroup=!0,n.children=e(t.children)),n})}(a),i.param=e.param,n.setState({pageData:i})}else n.setState({pageData:void 0})},n.doLoadPage=function(e){var t=e.clientID||e.offlineDemoNodeID;e.loaded||r.TaskManager.taskManager.push(function(o){r.default.loadPageData(t,e.dataURL,function(e,a){a?r.default.parsePage(t,a,function(e){e.error||n.doReconstruction(e.content),o()}):o()})})},n.renderComponent=function(e){var t=void 0,o=e.data;return e.isGroup&&(t=e.children),a.createElement(i.default,{key:o.controlID,data:e},t&&t.map(function(e){return n.renderComponent(e)}))},n.state={inView:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"componentDidMount",value:function(){this.props.isInApp&&this.doLoadPage(this.props.page)}},{key:"componentDidUpdate",value:function(e){this.props.isInApp&&this.props.page.dataURL!==e.page.dataURL&&this.doLoadPage(this.props.page)}},{key:"componentWillReceiveProps",value:function(e){this.props.page.dataURL!==e.page.dataURL||this.props.page.pageData!==e.page.pageData||e.page.pageData&&!this.state.pageData?this.doReconstruction(e.page.pageData):this.state.pageData||e.page.loaded||this.doLoadPage(e.page)}},{key:"renderPage",value:function(){var e=this,t=this.state.pageData;if(!t)return null;var n="white";return t.param&&(n=t.param.backgroundColor),a.createElement("div",{key:t.ID,style:{width:t.size.w,height:t.size.h,background:n}},a.createElement("div",null,t&&t.controls.map(function(t){return e.renderComponent(t)})))}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.className;return a.createElement("div",{ref:this.self,id:this.props.ID,style:t,className:"prototype-page "+(n||"")},this.renderPage())}}]),t}();l.defaultProps={isInApp:!0},t.default=l},1919:function(e,t,n){},1920:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);n(1921);var i=n(6),r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n.selfRef=a.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"shouldComponentUpdate",value:function(e,t,n){var o=this.props.data.data!==e.data.data;return o&&console.log(this.props.data.data.controlID),o}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.children,o=t.data,r=o.controlTypeID,l=o.controlID;if(!i.default.PropertiesHelper.getFullProperties(t).isShow)return null;var s=i.default.ComponentFactory.createComponent(r),c=i.default.StyleHelper.init(t).bounds().opacity().style,u=i.default.ComponentFactory.getComponentClassName(r);return a.createElement("div",{id:t.data.controlID,datatype:t.data.controlTypeID,style:c,className:"prototype-component"},s&&a.createElement(s,Object.assign({key:l},t,{className:u}),n))}}]),t}();r.defaultProps={},t.default=r},1921:function(e,t,n){},1922:function(e,t,n){},1923:function(e,t,n){},1924:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(10),r=n(1925),l=n(1873),s=n(72),c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.interactions,n=e.options,o=e.appType,c=e.page,u=e.fadeIn,d=e.scale,p=e.onFadeInEnd,f=e.onInteractionClick,h=e.onInteractionPan,g=e.onInteractionPanDone,m=e.overlayPage,v=c.landscape,y=c.size,w=n.mobileType,b=n.alwaysShowLinkArea,P=n.showLinkAreaWhenHovered;return a.createElement(a.Fragment,null,t.map(function(e){if(e.type===s.externalLink&&!e.target)return null;var t=e.size,n=e.position,c=l.calculateInteractionSize({appType:o,mobileType:w,landscape:v,position:n,size:t,pageSize:y,scale:d}),E=i.default("link-hot",{hovered:!b&&P,hidden:!b&&!u,normal:"web"===o,"link-hot-fade":!b&&u});return a.createElement(r.default,{key:e._id,style:c,interaction:e,clz:E,onAnimationEnd:p,onClick:f,onPan:h,onPanDone:g,overlayPage:m})}))}}]),t}();c.defaultProps={fadeIn:!1,scale:1,options:{alwaysShowLinkArea:!0,showLinkAreaWhenHovered:!0,mobileType:s.MobileType.iphoneX},overlayPage:null},t.default=c},1925:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1926),r=n(489),l=n(487),s=n(1873),c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.interactionDiv=a.createRef(),n.onMoveStart=function(e){e.preventDefault();var t=n.props,o=t.interaction,a=t.onPan,i=t.onPanDone,r=t.overlayPage,l=o.gesture||"tap";!l||-1===l.indexOf("swipe")||r||s.moveStart(e,l,function(e){a(e,o)},function(e){i(e,o)})},n.setTiming=function(e){n.isTiming=e},n.handleOnClick=function(e,t,o,a){e&&!n.isTiming?(n.setTiming(!0),setTimeout(function(){n.setTiming(!1),a(t,o)},e)):n.isTiming||a(t,o)},n.isTiming=!1,n.state={touchAction:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.interaction,o=t.onClick,a=t.overlayPage,r=new i(this.interactionDiv.current),c=n.gesture||"tap";"swipeup"===c?this.setState({touchAction:"pan-up"}):"swipedown"===c?this.setState({touchAction:"pan-down"}):this.setState({touchAction:"auto"});var u=n.delay||0;if(r.get("swipe").set({velocity:.1}),r.set({domEvents:!0}),"doubleClick"===c)r.on("tap",function(t){2===t.tapCount&&e.handleOnClick(u,t,n,o)});else if("hover"===c)this.interactionDiv.current.addEventListener("mouseenter",function(t){e.handleOnClick(u,t,n,o)},!1);else{var d=c;c.indexOf("swipe")>-1&&(s.getGestureDirection(c)===l.VERTICAL&&r.get("swipe").set({direction:i.DIRECTION_ALL}),a||(c="pan")),r.on(""+c,function(t){d===c&&e.handleOnClick(u,t,n,o)})}}},{key:"componentWillUnmount",value:function(){this.interactionDiv.current.removeEventListener("mouseenter",this.handleOnClick.bind(this))}},{key:"render",value:function(){var e=this.props,t=e.clz,n=e.onAnimationEnd,o=e.interaction,i=this.props.style,l=o.gesture||"tap",s=i.width<32||i.height<32?{display:"none"}:null,c=r.AllTriggerType[l],u=i.width>=32&&i.height>=32&&c&&c.icon;return this.state.touchAction&&(i=Object.assign({},i,{touchAction:this.state.touchAction})),a.createElement(a.Fragment,null,a.createElement("div",{style:i,className:t,"data-type":"interaction",onAnimationEnd:n,ref:this.interactionDiv,onClick:function(e){e.stopPropagation()},onTouchStart:this.onMoveStart,onMouseDown:this.onMoveStart},u&&a.createElement("img",{src:c.icon,style:s,alt:l})))}}]),t}();t.default=c},1927:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(10),i=n(105),r=function e(t){var n=t.page,r=t.selID,l=t.onExpand,s=t.onSelected,c=t.offset,u=void 0===c?0:c,d=t.downArrowShow,p=n.children,f=n.name,h=n.expand,g=n._id,m=n.color,v=n.icon,y=n.isGroup,w=!(y||p&&0!==p.length);return o.createElement("div",{key:g,className:"tree-node",style:{position:"relative",right:0}},o.createElement("div",{className:a.default("tree-node-title",{selected:g===r}),onClick:function(){s(n)},style:{paddingLeft:u}},o.createElement("span",{onClick:function(e){e.stopPropagation(),w||l(n)}},o.createElement("svg",{viewBox:"0 0 8 8",style:d?null:{visibility:"hidden"}},o.createElement("path",{className:a.default("path",{leaf:w}),d:h?"M0 2 H8 L4 6 Z":"M2 0 V8 L6 4 Z"}))),y&&o.createElement(i.Icon,{cls:h?"tree_index":"tree_group",color:"#222"}),!y&&v&&o.createElement(i.Icon,{cls:v,color:m}),!y&&!v&&m&&o.createElement("div",{className:"default-icon",style:{background:m}}),o.createElement("span",{className:"tree-node-title-name"},f)),h&&p&&o.createElement("div",{className:a.default("tree-node-content",{expand:h})},p&&p.map(function(t){return o.createElement(e,{key:t._id,page:t,selID:r,onExpand:l,onSelected:s,offset:u+16,downArrowShow:d})})))};r.defaultProps={page:null,selID:null,onExpand:null,onSelected:null,offset:0,downArrowShow:!0},t.default=r},1928:function(e,t,n){},1929:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(0),r=d(i),l=d(n(4)),s=d(n(1930)),c=n(105),u=d(n(8));function d(e){return e&&e.__esModule?e:{default:e}}n(1931);var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));f.call(n);var o=n.doExpandAllNode(e.data);return n.state={data:o},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.selectedID,o=t.cls,a=t.downArrowShow,i=t.links,l=t.homePageId,d=t.groupCount,p=t.pageCount,f=t.name,h=this.state.data;var g,m,v,y,w=(g=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,m=window.devicePixelRatio||1,v=window.screen.width*m,y=window.screen.height*m,!!(g&&1125===v&&2436===y||g&&828===v&&1792===y||g&&1242===v&&2688===y));return r.default.createElement("div",{className:"phone-preview-tree "+o,style:{paddingTop:w?"120px":"80px"}},r.default.createElement("div",{className:"tree-head",style:{top:w?"30px":"0px"}},r.default.createElement("div",{className:"tree-head-wrap"},r.default.createElement("div",{className:"logo"},r.default.createElement("div",{className:"icon iconfont icon-_logo"})),r.default.createElement("div",{className:"text"},r.default.createElement("span",null,f),r.default.createElement("p",null,(0,u.default)("appManager.countLabel",d,p))),r.default.createElement("div",{className:"share",onClick:this.shareApp},r.default.createElement("div",{className:"icon-_demo_share iconfont"})))),r.default.createElement("div",{className:"tree-wrap"},this.renderLinks(i),h&&h.map(function(t){return r.default.createElement(s.default,{key:t._id,page:t,homePageId:l,downArrowShow:a,selID:n,onExpand:e.handleNodeExpandChange,onSelected:e.handleNodeSelected})})),r.default.createElement("div",{className:"tree-exit-preview"},r.default.createElement("div",{className:"tree-exit",style:{border:"none"}},r.default.createElement(c.Button,{width:"100%",onClick:this.exitPreview},(0,u.default)("preview.exit")))))}}]),t}(),f=function(){var e=this;this.doExpandAllNode=function(t){return t.map(function(t){var n=o({},t,{expand:!0});return n.children&&n.children.length&&(n.children=e.doExpandAllNode(n.children)),n})},this.handleNodeExpandChange=function(t){if(e.props.canExpand){var n=t;n.expand=!n.expand;var o=e.state.data,a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(o));e.setState({data:a})}},this.handleNodeSelected=function(t){if(t._id&&!t.isGroup){var n=e.props.onPageSelected;n&&n(t._id)}},this.renderLinks=function(){var t=e.props.links;return t?r.default.createElement("div",{className:"links-container"},t.map(function(t){return r.default.createElement("div",{className:"tree-node"},r.default.createElement("div",{className:"tree-node-title link",onClick:function(n){n.stopPropagation(),e.handleNodeSelected(t)}},r.default.createElement("span",null,t.name)))})):null},this.exitPreview=function(){window.ReactNativeWebView&&window.ReactNativeWebView.postMessage("exit")},this.shareApp=function(){window.ReactNativeWebView&&window.ReactNativeWebView.postMessage("share")}};p.propTypes={data:l.default.arrayOf(l.default.shape({})).isRequired,selectedID:l.default.string,onPageSelected:l.default.func,canExpand:l.default.bool,cls:l.default.string,downArrowShow:l.default.bool},p.defaultProps={selectedID:"",onPageSelected:null,canExpand:!0,cls:"",downArrowShow:!0},t.default=p},1930:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(0)),a=l(n(4)),i=l(n(10)),r=n(105);function l(e){return e&&e.__esModule?e:{default:e}}var s=function e(t){var n=t.page,a=t.selID,l=t.onExpand,s=t.onSelected,c=t.offset,u=void 0===c?0:c,d=t.downArrowShow,p=t.homePageId,f=n.children,h=n.name,g=n.expand,m=n._id,v=n.color,y=n.icon,w=n.isGroup,b=!(w||f&&0!==f.length),P=n._id===p;return o.default.createElement("div",{key:m,className:"tree-node",style:{position:"relative",right:0}},o.default.createElement("div",{className:(0,i.default)("tree-node-title",{selected:m===a}),onClick:function(e){w?(e.stopPropagation(),b||l(n)):s(n)},style:{paddingLeft:u}},!w&&o.default.createElement("span",{className:f.length<1&&P?"no-child":null,onClick:function(e){e.stopPropagation(),b||l(n)}},o.default.createElement("svg",{viewBox:"0 0 8 8",style:d?null:{visibility:"hidden"}},o.default.createElement("path",{className:(0,i.default)("path",{leaf:b}),d:g?"M0 2 H8 L4 6 Z":"M2 0 V8 L6 4 Z"}))),P&&o.default.createElement(r.Icon,{cls:"broad_home"}),w&&o.default.createElement(r.Icon,{cls:g?"tree_index":"tree_group",color:"#222"}),!w&&y&&o.default.createElement(r.Icon,{cls:y,color:v}),!w&&!y&&v&&o.default.createElement("div",{className:"default-icon ",style:{background:v}}),o.default.createElement("span",{className:"tree-node-title-name"},h)),g&&f&&o.default.createElement("div",{className:(0,i.default)("tree-node-content",{expand:g})},f&&f.map(function(t){return o.default.createElement(e,{key:t._id,page:t,selID:a,onExpand:l,homePageId:p,onSelected:s,offset:u+24,downArrowShow:d})})))};s.propTypes={page:a.default.shape({}),selID:a.default.string,onExpand:a.default.func,onSelected:a.default.func,offset:a.default.number,downArrowShow:a.default.bool},s.defaultProps={page:null,selID:null,onExpand:null,onSelected:null,offset:0,downArrowShow:!0},t.default=s},1931:function(e,t,n){},1932:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppType={phone:"phone",web:"web"},t.LARGE_PAGE_WIDTH=1e4,t.LARGE_PAGE_HEIGHT=1e4},1933:function(e,t,n){},1934:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(73),r=n(105),l=n(1935),s=n(1938),c=n(1940),u=n(1963),d=n(1879),p=n(51),f=n(72),h=n(227),g=n(1876),m=n(1965);n(1967);var v=n(496),y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.shell=a.createRef(),n.contextDom=a.createRef(),n.receiverMessage=function(e){var t=e.data.resize>0?-.1:.1,o=n.state.scale+t;o=Math.round(100*o)/100,e.data&&e.data.resize&&o>=.2&&o<=4&&n.setState({scale:o})},n.onContextMenu=function(e){e.preventDefault()},n.onToggled=function(){n.shell.current&&n.shell.current.calculatePoint()},n.onExit=function(){var e=n.props,t=e.app,o=e.mode,a=e.redirectTo,i=e.currentPage,r=e.onSelectPage,l=e.loadApp,s=e.user,c=e.isFromApps;if(s.user){var u="/app/"+i.appID+"/"+o;v.needAPageMode(o)&&(u=u+"/"+i._id),c&&(u="/team/"+t.teamID,t.appSetID&&(u+="/AppSet/"+t.appSetID));try{a(u),setTimeout(function(){l(i.appID,i._id),r(i._id)})}catch(e){window.history.go(-1)}}else window.history.go(-1)},n.onChangeScale=function(e){n.setState({scale:e})},n.doInitPreviewOptions=function(){var e=n.props,t=e.app;if(e.loaded&&t){var o={showLinkAreaWhenHovered:t.showLinkAreaWhenHovered,alwaysShowLinkArea:t.alwaysShowLinkArea,mobileType:t.mobileType,showControllerPanel:t.showControllerPanel,showToolbar:t.showToolbar,autoScreen:t.autoScreen};n.setState({previewOptions:o})}},n.doInitTreeData=function(){var e=n.props,t=e.app,o=e.loaded,a=n.state.treeData;o&&t&&!a&&n.setState({treeData:t.children})},n.autoScale=function(){n.setState({scale:1})},n.doZoom=function(e){n.setState({scale:e/100})},n.handleWindowMouseDown=function(){var e=n.state.previewOptions,t=n.props.onLinkAreaFadeInStart;e&&!e.alwaysShowLinkArea&&t()},n.handleSwitchControlPanelVisible=function(){var e=n.state.previewOptions;e.showControllerPanel=!e.showControllerPanel,n.setState({previewOptions:e})},n.shellDom=a.createRef(),n.isFirstLoaded=!0,n.state={scale:1,treeData:null,previewOptions:{alwaysShowLinkArea:!0,mobileType:f.MobileType.iphone,showControllerPanel:!0,showLinkAreaWhenHovered:!0,showToolbar:!0,autoScreen:!0}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.handleWindowMouseDown),window.addEventListener("contextmenu",this.onContextMenu),this.doInitPreviewOptions(),this.doInitTreeData(),window.addEventListener("message",i.throttle(this.receiverMessage,66))}},{key:"componentDidUpdate",value:function(){if(this.isFirstLoaded){var e=this.props,t=e.loaded,n=e.currentPage,o=e.onPreLoadImage;if(t){var a=this.props.app;if(0===p.getFlattenPages(a.children).length)return;this.isFirstLoaded=!1,this.doInitPreviewOptions(),o(n._id),this.doInitTreeData()}}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.handleWindowMouseDown),window.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("message",this.receiverMessage);var e=this.props.onUnmount;e&&e()}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentPage,o=t.app,i=t.preview,r=t.goBackWard,u=t.goForWard,d=t.goHome,p=t.onPageSelected,f=t.controlPanelType,g=t.onClickInviteOk,m=t.goPrevPage,v=t.goNextPage,y=t.notFromInvitation,w=this.state,b=w.previewOptions,P=w.scale,E=w.treeData;if(!b||!i||!E)return null;var S=n?n._id:"",O=!i.license||"free"===i.license.license;return a.createElement(l.default,{className:"hot-keys-container",keyDownHandlers:{escape:this.onExit,arrowleft:r,arrowright:u,arrowup:m,arrowdown:v},keyUpHandlers:{}},a.createElement("div",{className:"c-preview"},a.createElement(s.default,{isShow:b.showControllerPanel,isFree:O,name:o.name,appType:o.appType,options:b,onOptionsChanged:function(t){e.setState({previewOptions:t})},onClose:this.handleSwitchControlPanelVisible,data:E,selectedID:S,onPageSelected:p,onToggled:this.onToggled,controlPanelType:f,onClickInviteOk:g,teamName:o.teamName,notFromInvitation:y,showOptions:o.source===h.AppSource.Default}),this.renderPreviewContent()),a.createElement(c.default,{isShow:b.showToolbar,showControllerPanel:b.showControllerPanel,appType:o.appType,scale:100*P,canBack:i.hasBack,canNext:i.hasNext,onToggleControllerPanelVisible:this.handleSwitchControlPanelVisible,onBackWard:r,onForWard:u,onGoHome:d,onZoomChange:this.doZoom,onExit:this.onExit,zip:i.zip}))}},{key:"renderPreviewContent",value:function(){var e=this.props,t=e.currentPage,n=e.nextPage,o=e.app,i=e.interactions,l=e.preview,s=e.linkFadeIn,c=e.needPerspective,p=e.overlayPage,f=e.overlayAnimation,v=this.state,y=v.previewOptions,w=v.scale,b=v.treeData;if(!y||!l||!b)return null;if(o.source===h.AppSource.Axure)return a.createElement("div",{className:"preview-context",ref:this.contextDom},a.createElement("div",{className:"special-preview-page-wrapper",style:{transform:"scale("+w+")",transformOrigin:"top left",width:100/w+"%",height:100/w+"%"}},a.createElement(g.default,{dataURL:t.dataURL,preventEvents:!1,adjustBodyPosition:!1})));if(o.source===h.AppSource.Mockplus)return a.createElement("div",{className:"preview-context",ref:this.contextDom},a.createElement("div",{className:"special-preview-page-wrapper special-preview-page-wrapper-mockplus",style:{transform:"scale("+w+")",transformOrigin:"top left",width:100/w+"%",height:100/w+"%"}},a.createElement(m.default,{dataURL:t.dataURL})));var P=t?Object.assign({},t.size):{width:0,height:0};return a.createElement("div",{className:"preview-context",ref:this.contextDom},a.createElement(r.ScrollView,null,a.createElement(u.default,{ref:this.shell,shellRef:this.shellDom,size:P,scale:w,appType:o.appType,mobileType:y.mobileType,isLandscape:t.landscape,onMount:this.autoScale,needPerspective:c,autoScreen:y.autoScreen,onChangeScale:this.onChangeScale},a.createElement(d.default,{interactions:i,firstPage:t,nextPage:n,overlayPage:p,scale:w,appType:o.appType,options:y,isFadeIn:s,overlayAnimation:f,panState:l.panState,delta:l.delta}))))}}]),t}();y.defaultProps={app:null,preview:null,currentPage:null,nextPage:null,overlayPage:null,interactions:null,loaded:!1,goHome:null,goBackWard:null,goForWard:null,onPreLoadImage:null,linkFadeIn:!1,onLinkAreaFadeInStart:null,onPageSelected:null,onUnmount:null,needPerspective:!1,overlayAnimation:"",user:null,goPrevPage:null,goNextPage:null,notFromInvitation:!1,isFromApps:!1},t.default=y},1935:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var a=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(10),l=n(1936);n(1937);var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onKeyDown=n.onKeyDown.bind(n),n.onKeyUp=n.onKeyUp.bind(n),n.dom=i.createRef(),n.focused=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),o(t,[{key:"onKeyDown",value:function(e){var t=l.convertEventToHotKey(e),n=this.props.keyDownHandlers,o=n&&n[t];o&&(o(e),e.preventDefault(),e.stopPropagation())}},{key:"onKeyUp",value:function(e){var t=l.convertEventToHotKey(e),n=this.props.keyUpHandlers,o=n&&n[t];o&&(o(e),e.preventDefault(),e.stopPropagation())}},{key:"focus",value:function(){this.dom.current&&this.dom.current.focus()}},{key:"blur",value:function(){this.dom.current.blur()}},{key:"render",value:function(){var e,t,n,o=this,l=this.props,s=l.className,c=l.style,u=(l.keyDownHandlers,l.keyUpHandlers,a(l,["className","style","keyDownHandlers","keyUpHandlers"]));return i.createElement("div",Object.assign({className:r.default("hot-key-catcher",(e={},t=s||"",n=!0,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),ref:this.dom,style:c,tabIndex:-1,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onBlur:function(){o.focused=!1},onFocus:function(){o.focused=!0}},u),this.props.children)}}]),t}();t.default=s},1936:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(28),a={},i={};t.convertEventToHotKey=function(e){var t=[],n=e.key.toLowerCase();return("control"===n||"meta"===n||e.metaKey||e.ctrlKey)&&t.push("ctrl"),(e.altKey||"alt"===n)&&t.push("alt"),(e.shiftKey||"shift"===n)&&t.push("shift"),!function(e){return o.isMacOS?"backspace"===e:"delete"===e||"del"===e}(n)?function(e){return-1===["control","shift","alt","meta"].indexOf(e.toLowerCase())}(e.key)&&t.push(e.key):t.push("delete"),t.join("+").toLowerCase()};var r=function(e){switch(e){case"rename":return o.isMacOS?"enter":"f2";case"esc":return"escape";case"space":return" ";case"del":return"delete";default:return e}},l=function(e){return e.toLowerCase().split("+").map(r).join("+")};window.addEventListener("keydown",function(e){var n=t.convertEventToHotKey(e);a[n]&&a[n].forEach(function(t){t(e)})}),window.addEventListener("keyup",function(e){var n=t.convertEventToHotKey(e);i[n]&&i[n].forEach(function(t){t(e)})});var s=function(e,t,n){if("number"!=typeof t){var o=l(t);e[o]||(e[o]=[]),e[o].push(n)}},c=function(e,t,n){if("number"!=typeof t){var o=l(t);e[o]&&e[o].splice(e[o].indexOf(n),1)}};t.isHotKeyPressed=function(e,n){return t.convertEventToHotKey(e)===l(n)},t.addKeyDownListener=function(e,t){s(a,e,t)},t.removeKeyDownListener=function(e,t){c(a,e,t)},t.addKeyUpListener=function(e,t){s(i,e,t)},t.removeKeyUpListener=function(e,t){c(i,e,t)}},1937:function(e,t,n){},1938:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(10),r=n(72),l=n(487),s=n(105),c=n(1885),u=n(8),d=n(35),p=n(1886),f=n(227);n(1939);var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.doToggleProgress=function(){var e=0,t=n.props.onToggled;!function n(){e<9&&window.requestAnimationFrame(n),e>0&&t(),e+=1}()},n.handleOptionsChanged=function(e){var t=n.props,o=t.options,a=t.onOptionsChanged,i=Object.assign({},o,e);a&&a(i)},n.handleTeamName=function(e){for(var t=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);o>=1&&o<=126||65376<=o&&o<=65439?t++:t+=2}return t>34?e.substr(0,15)+"...":e},n.renderPhoneType=function(){var e=n.props,t=e.appType,o=e.options.mobileType;return t!==f.AppType.Phone?null:a.createElement("div",{className:"mobile-type"},a.createElement("span",null,u.default("prototype.deviceShell")),a.createElement(s.Select,{value:o,width:120,position:"right",options:Object.keys(r.MobileType).map(function(e){return r.MobileType[e]}),onSelect:function(e){n.handleOptionsChanged({mobileType:e})}}))},n.renderControlPanelBottom=function(){var e=n.props,t=e.isFree,o=e.controlPanelType,r=e.data,s=e.onClickInviteOk,c=e.teamName;if(e.notFromInvitation)return null;var f=r[0].appID;return o===l.SHOW_TEAM_PANEL?a.createElement("div",{className:"advertising show"},a.createElement("div",{className:"text"},u.default("share.viewPojectText")),a.createElement("a",{href:"/app/"+f+"/storyboard",target:"_blank",rel:"noopener noreferrer"},a.createElement("div",{className:"button"},u.default("share.viewPojectBtn")))):o===l.SHOW_INVITATION_PANEL?a.createElement("div",{className:i.default("advertising show",{en:!d.isZh})},a.createElement("div",{className:"text"},a.createElement("p",null,u.default("share.invitationTitle",n.handleTeamName(c))),a.createElement("p",null,u.default("share.invitationText"))),a.createElement("a",{rel:"noopener noreferrer",onClick:s},a.createElement("div",{className:"button"},u.default("share.accept")))):a.createElement("div",{className:"advertising "+(t?"free":"")},a.createElement("div",{className:"text"},u.default("preview.isUsedIDoc")),a.createElement("a",{href:p.default.homepage+"/?hmsr=idocpreview",target:"_blank",rel:"noopener noreferrer"},a.createElement("div",{className:"button"},u.default("preview.IAlsoDoOne"))))},n.state={expand:e.isShow},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({expand:e.isShow})}},{key:"componentWillUpdate",value:function(e){e.isShow!==this.state.expand&&this.doToggleProgress()}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,o=t.onClose,r=t.options,l=t.data,d=t.selectedID,p=t.onPageSelected,f=t.showOptions,h=this.state.expand,g=r.alwaysShowLinkArea,m=r.showLinkAreaWhenHovered,v=r.autoScreen;return a.createElement("div",{className:i.default("c-controller-panel",{expand:h,fold:!h}),onMouseDown:function(e){e.stopPropagation()}},a.createElement("div",{className:"preview-left-panel"},a.createElement("div",{className:i.default("option-panel",{"option-panel-no-options ":!f})},a.createElement("div",{className:"project-name"},a.createElement("span",null,n),a.createElement("div",{className:"preview-close"},a.createElement(s.Icon,{cls:"demo_close",onClick:function(){o&&o()}}))),f&&a.createElement("div",{className:"option-check"},a.createElement(s.Checkbox,{text:u.default("prototype.alwaysShowLinkArea"),checked:g,onChange:function(t){e.handleOptionsChanged({alwaysShowLinkArea:t})}})),f&&a.createElement("div",{className:"option-check"},a.createElement(s.Checkbox,{text:u.default("prototype.showLinkAreaWhenHovered"),checked:m,onChange:function(t){e.handleOptionsChanged({showLinkAreaWhenHovered:t})}})),f&&a.createElement("div",{className:"option-check"},a.createElement(s.Checkbox,{text:u.default("prototype.autoScreen"),checked:v,onChange:function(t){e.handleOptionsChanged({autoScreen:t})}})),f&&this.renderPhoneType()),a.createElement("div",{className:"tree-frame"},a.createElement(s.ScrollView,null,a.createElement(c.default,{key:"tree",data:l,selectedID:d,onPageSelected:p}))),this.renderControlPanelBottom()))}}]),t}();h.defaultProps={name:null,isShow:!0,isFree:!0,appType:null,options:{alwaysShowLinkArea:!0,mobileType:r.MobileType.iphone,showControllerPanel:!0,showLinkAreaWhenHovered:!0,showToolbar:!0,autoScreen:!0},onOptionsChanged:null,onClose:null,data:[],selectedID:null,onPageSelected:null,onToggled:null,onClickInviteOk:null,notFromInvitation:!1},t.default=h},1939:function(e,t,n){},1940:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1941),r=n(105),l=n(8),s=n(90);n(1962);var c=n(28),u=function(e){var t="preview_navigation_bar_position";if(!e){var n=c.getLocalStorage().getItem(t);if(n){var o=JSON.parse(n),a=window.innerHeight;return o.top=Math.min(o.top,a-50),o.right=Math.max(o.right,-200),o}return{top:50,right:50}}return localStorage.setItem(t,JSON.stringify(e)),null},d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.zoomerDom=a.createRef(),n.qrcodeCanvas=a.createRef(),n.self=a.createRef(),n.qrCode=a.createRef(),n.setQrShow=function(e){n.setState({showQrCode:e}),e&&n.zoomerDom.current.closePanel(),n.manageQrMouseDown(e)},n.manageResizeEvent=function(){n.props.isShow?window.addEventListener("resize",n.handleResize):window.removeEventListener("resize",n.handleResize)},n.manageQrMouseDown=function(e){e?window.addEventListener("mousedown",n.closeQrCode):window.removeEventListener("mousedown",n.closeQrCode)},n.closeQrCode=function(){n.setState({showQrCode:!1}),n.manageQrMouseDown(!1)},n.handleResize=function(){if(n.props.isShow){var e=n.state.pt,t=n.self.current.getBoundingClientRect(),o=t.left,a=t.width,i=window.innerWidth;if(o<0){var r=i-a;n.setState({pt:Object.assign({},e,{right:r})})}}},n.createQRCode=function(){if(n.qrcodeCanvas&&!n.initQrcode){if(n.initQrcode=!0,"phone"!==n.props.appType)return;var e=window.location.href.replace(window.location.search,"");i.toDataURL(n.qrcodeCanvas.current,e,{width:120,margin:4,color:{dark:"#222",light:"#fff"}},function(){})}},n.adjustQRCodePosition=function(){var e=n.state,t=e.showQrCode,o=e.codeTop;if(t&&n.qrCode){var a=n.qrCode.current.getBoundingClientRect(),i=n.self.current.getBoundingClientRect(),r=-a.height-2;i.top-a.height<0&&(r=i.height+2),o!==r&&n.setState({codeTop:r})}},n.handleMouseDown=function(e){if("IMG"!==e.target.tagName){var t=n.state,o=t.pt,a=t.showQrCode,i=o.top,r=o.right,l={top:i,right:r},c=n.self.current.getBoundingClientRect(),d=window.innerWidth,p=window.innerHeight;s.dragDelegate(function(e,t){e.stopPropagation();var o=t.x,a=t.y;l.top=Math.max(0,Math.min(i+a,p-c.height)),l.right=Math.max(0,Math.min(r-o,d-c.width)),n.setState({pt:Object.assign({},l)})},function(e,t,o){var i=n.state.isClickQrCodeIcon;o&&u(l),i?(n.setState({isClickQrCodeIcon:!1}),n.setQrShow(a)):(n.setState({isClickQrCodeIcon:!1}),n.closeQrCode())})}},n.state={pt:u(),showQrCode:!1,codeTop:0,isClickQrCodeIcon:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"componentDidMount",value:function(){this.handleResize(),this.manageResizeEvent()}},{key:"componentDidUpdate",value:function(){this.createQRCode(),this.adjustQRCodePosition()}},{key:"render",value:function(){var e=this,t=this.state,n=t.pt,o=t.showQrCode,i=t.codeTop,s=this.props,c=s.onToggleControllerPanelVisible,u=s.onGoHome,d=s.onBackWard,p=s.onForWard,f=s.appType,h=s.onZoomChange,g=s.scale,m=s.isShow,v=s.canBack,y=s.canNext,w=s.onExit,b=s.canExit,P=s.zip,E=s.showControllerPanel;return m?a.createElement("div",{ref:this.self,style:n,className:"c-preview-navigation-bar",onMouseDown:this.handleMouseDown},a.createElement(r.Icon,{cls:"demo_control",tooltip:E?l.default("prototype.hideControllerPanel"):l.default("prototype.showControllerPanel"),onClick:c}),a.createElement(r.Icon,{cls:"demo_home",tooltip:l.default("preview.goHome"),onClick:u}),a.createElement(r.Icon,{cls:"demo_leftarrow",tooltip:l.default("preview.goBackWard"),color:v?void 0:"#ccc",onClick:d}),a.createElement(r.Icon,{cls:"demo_rightarrow",tooltip:l.default("preview.goForWard"),color:y?void 0:"#ccc",onClick:p}),"phone"===f&&!P&&a.createElement("div",{onMouseDown:function(){e.setState({isClickQrCodeIcon:!0})}},a.createElement("div",{onMouseDown:function(e){e.stopPropagation()}},a.createElement(r.Icon,{cls:"demo_code",tooltip:l.default("preview.showQrCode"),onClick:function(t){t.stopPropagation(),e.setQrShow(!o)}})),a.createElement("div",{ref:this.qrCode,style:{top:i,display:o?"block":"none"},className:"qr-code"},a.createElement("canvas",{ref:this.qrcodeCanvas}))),a.createElement("div",{className:"zoomer-container",onMouseDown:function(t){t.stopPropagation(),e.setQrShow(!1)}},a.createElement(r.Zoomer,{onZoom:h,ref:this.zoomerDom,min:20,max:400,step:10,value:g,canInput:!1,canSelect:!0})),b&&!P&&a.createElement(r.Icon,{cls:"demo_quit",tooltip:l.default("preview.exit"),onClick:w})):null}}]),t}();d.defaultProps={onGoHome:null,onBackWard:null,onForWard:null,onZoomChange:null,onToggleControllerPanelVisible:null,scale:100,appType:null,isShow:!0,canBack:!1,canNext:!1,canExit:!0,onExit:null,zip:!1},t.default=d},1962:function(e,t,n){},1963:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(10),r=n(1880),l=n(59),s=n(494),c=n(487);n(1964);var u=s.default(),d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.calculatePoint=function(){var e=n.props.shellRef,t=n.state,o=t.containerHeight,a=t.containerWidth;if(e){var i=e.current.parentNode.getBoundingClientRect(),r=i.height,l=i.width;o===r&&a===l||n.setState({containerHeight:r,containerWidth:l})}},n.calculateAutoScreenScale=function(){var e=n.props,t=e.onChangeScale,o=e.appType,a=e.shellRef,i=e.scale,l=e.isLandscape,s=e.mobileType,u=e.size,d="phone"===o&&s!==c.MOBILE_TYPE_NONE,p=null,f=i;if(a){var h=a.current.parentNode.getBoundingClientRect(),g=h.width,m=h.height;if(d){if(p=r.default.getShellInfo(s,l)){var v=p,y=v.defaultScreenSize,w=v.shellSize,b=v.screenBounds;f=g/m<w.width/w.height?(g-40)/(w.width*(y.height/b.height)):(m-40)/(w.height*(y.width/b.width))}}else{var P=u.width,E=u.height;f=g/m>P/E?(m-40)/E:(g-40)/P}}t(f)},n.state={containerHeight:0,containerWidth:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"componentDidMount",value:function(){this.calculatePoint();var e=this.props,t=e.onMount;e.autoScreen?setTimeout(this.calculateAutoScreenScale,0):setTimeout(t,0),window.addEventListener("resize",u.call)}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.props,o=n.appType,a=n.autoScreen,i=n.mobileType,r=n.onMount,l=n.isLandscape,s=n.size,u=!1;(u="phone"===o?i!==c.MOBILE_TYPE_NONE?e.mobileType!==i||e.autoScreen!==a||e.isLandscape!==l:e.mobileType!==i||e.autoScreen!==a||e.size.width!==s.width||e.size.height!==s.height:e.autoScreen!==a||e.size.width!==s.width||e.size.height!==s.height)&&e.autoScreen?setTimeout(this.calculateAutoScreenScale,0):u&&!e.autoScreen&&setTimeout(r,0)}},{key:"componentWillUpdate",value:function(){u.remove(this.calculatePoint)}},{key:"componentDidUpdate",value:function(){u.add(this.calculatePoint)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",u.call)}},{key:"renderMobileShell",value:function(e){var t=this.props,n=t.appType,o=t.mobileType;if("phone"!==n||o===c.MOBILE_TYPE_NONE)return null;if(e){var r=e.shellImage,l={};return l[o.toLowerCase()]=!0,a.createElement("div",{className:i.default("device-box",l),style:{width:"100%",height:"100%",top:0,left:0,position:"absolute"}},a.createElement("img",{src:r,style:{width:"100%",height:"100%",top:0,left:0,position:"absolute",pointerEvents:"none"},draggable:!1}))}}},{key:"render",value:function(){var e=this.props,t=e.size,n=e.scale,o=e.mobileType,s=e.isLandscape,u=e.appType,d=e.shellRef,p=e.needPerspective,f=this.state,h=f.containerHeight,g=f.containerWidth,m=Object.assign({},l.size.scale(t,n)),v=0,y=0,w=m.width,b=m.height,P="phone"===u&&o!==c.MOBILE_TYPE_NONE,E=w,S=b,O=w,T=b,k=null;if(P){if(k=r.default.getShellInfo(o,s)){var _=k,I=_.defaultScreenSize,x=_.shellSize,L=_.screenBounds,C=I.width/L.width*n;v=Math.max(v,Math.ceil(L.left*C)),y=Math.floor(L.top*C),T=Math.ceil(L.height*C),O=Math.round(L.width*C),E=Math.round(x.width*C),S=Math.round(x.height*C)}}else E+=20,T=S=window.innerHeight;var D={left:v,top:y,width:O,height:T},M=0,A=Math.max(20,Math.round((g-E)/2));return P?M=Math.max(20,Math.round((h-S)/2)):(D.height=Math.min(S,b),b<h&&(D.top=Math.round((h-b)/2))),a.createElement("div",{ref:d,style:{width:E,height:S,left:A,top:M},className:i.default("c-device",{mobile:P})},a.createElement("div",{className:i.default("device-screen",{mobile:P,perspective:p}),style:D},this.props.children),this.renderMobileShell(k))}}]),t}();d.defaultProps={size:{width:0,height:0},mobileType:null,shellRef:null,isLandscape:!1,scale:1,onMount:null},t.default=d},1964:function(e,t,n){},1965:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(89);n(1966);t.default=function(e){var t=e.dataURL,n=a.extname(t),i=a.basename(t,n),r=t.replace(/MBX\/.*$/,"index.html")+"?to="+i;return o.createElement("iframe",{className:"mockplus-preview-iframe",src:r})}},1966:function(e,t,n){},1967:function(e,t,n){},1968:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(229),r=n(10),l=n(72),s=n(1873),c=n(105),u=n(121),d=n(1969),p=n(8);n(1972);var f=n(499),h=n(1875),g=n(493),m=n(487),v=n(491),y=n(35),w=n(1886),b=0,P=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClickInviteOk=function(){var e=n.props;e.user,e.onJoinShareApp;window.location.href=w.default.homepage},n.onTransitionEnd=function(e){if(n.props.preview.panState){if(e)n.handleAnimateEnd();else{var t=n.props,o=t.currentPage,a=t.skipDone,i=o?o._id:null;i&&(a({target:i}),setTimeout(n.doStartAutoSkip,0))}n.setState({animationFlag:null,interactionFlag:null})}},n.overlayToPage=function(e){var t=n.props,o=t.overlayPage,a=t.overlayTo;o?(n.setState({overlayAnimation:o.animate.animation}),setTimeout(function(){n.setState({overlayAnimation:""}),a(e)},o.animate.duration)):a(e)},n.doStopAutoSkip=function(){n.autoSkipID&&(clearTimeout(n.autoSkipID),n.autoSkipID=void 0)},n.handleAnimateEnd=function(){var e=n.props,t=e.nextPage,o=e.skipDone;n.doPreLoadImage(t._id);var a=t?t._id:null,i=t.animate,r=i.animation,l=i.duration,s=i.action;a&&(s===g.OVERLAY?n.doSkipOrOverlay({target:a,animation:r,duration:l,action:g.OVERLAY,noStyle:!0}):(o({target:a,animation:r}),setTimeout(n.doStartAutoSkip,0)))},n.handleInteractionClick=function(e,t){clearTimeout(b),b=0;var o=n.props,a=o.goBackWard,i=o.goHome;if(n.setState({linkFadeIn:!1}),n.doStopAutoSkip(),t.type!==l.externalLink)if(t.type===l.backLink)a();else if(t.type===l.homeLink)i();else{var r=t.target,s=t.action,c=t.animation,u=t.duration,d=t.type;n.doSkipOrOverlay({target:r,action:s,animation:c,duration:u,type:d,noStyle:!1})}else{var p=t.target;window.open(p,"_blank")}},n.doSkipOrOverlay=function(e){var t=n.props.skipTo;if(e.action===g.OVERLAY){var o=e.target,a=e.animation,i=e.duration,r=e.action,l=e.noStyle;n.overlayToPage({target:o,animation:a,duration:i,action:r,noStyle:l})}else t(e)},n.handlePageGesture=function(){clearTimeout(b),b=0,n.doPageSkip()},n.handleSkipToPage=function(e){var t=n.props.skipTo;n.doStopAutoSkip(),t({target:e}),setTimeout(n.doStartAutoSkip,0)},n.handleLinkAreaFadeInEnd=function(){n.state.linkFadeIn&&n.setState({linkFadeIn:!1})},n.handleLinkAreaFadeInStart=function(){n.setState({linkFadeIn:!0})},n.handleInteractionPan=function(e,t){var o=n.props.panTo;n.state.interactionFlag||n.setState({interactionFlag:Object.assign({},t,{animate:t.animation})}),o({target:t.target,animation:t.animation,duration:t.duration,gesture:t.gesture,action:t.action,type:t.type},e)},n.handleInteractionPanDone=function(e,t){(0,n.props.panDone)({target:t.target,animation:t.animation,duration:t.duration,gesture:t.gesture,action:t.action,type:t.type},e)},n.handlePagePan=function(e){var t=n.props,o=t.currentPage,a=t.loaded,i=t.panTo;if(a&&o&&o.onLoaded){var r=o.onLoaded;if(!r)return;var l=n.state.interactionFlag||r,s=l.target,c=l.animate,u=l.duration,d=l.gesture,p=l.action;s&&i({target:s,animation:c,duration:u,gesture:d,action:p,type:""},e)}},n.handlePagePanDone=function(e){var t=n.props,o=t.currentPage,a=t.loaded,i=t.panDone;if(a&&o&&o.onLoaded){var r=o.onLoaded;if(!r)return;var l=n.state.interactionFlag||r,s=l.target,c=l.animate,u=l.duration,d=l.gesture,p=l.action;s&&i({target:s,animation:c,duration:u,gesture:d,action:p,type:""},e)}},n.doPreLoadImage=function(e){var t=n.props,o=t.app,a=t.preLoad,i=t.interactions;s.preloadImage(e,o.children,i,a)},n.doStartAutoSkip=function(){var e=n.props,t=e.currentPage,o=e.nextPage,a=e.loaded,i=e.autoSkipToPage;if(a&&t&&!o){var r=t.onLoaded;if(r&&n.pageWhetherExist(r.target)){var l=t.onLoaded,s=l.delay,c=l.target,u=l.animate,d=l.duration,p=l.gesture,f=l.action;c&&!p&&(n.autoSkipID=window.setTimeout(function(){f===g.OVERLAY?n.overlayToPage({target:c,animation:u,duration:d}):(n.doStopAutoSkip(),i(c,{animation:u,duration:d}))},s))}}},n.pageWhetherExist=function(e){var t=n.props.app;if(t){var o=t.children;return s.validatePageExist(o,e)}return!1},n.doPageSkip=function(){var e=n.props,t=e.currentPage,o=e.nextPage,a=e.loaded,i=e.pageSkipToPage,r=e.overlayPage;if(a&&t&&!o&&t.onLoaded){var l=(r||t).onLoaded;if(!l)return;var s=l.target,c=l.animate,u=l.duration,d=l.action;s&&(d===g.OVERLAY?n.overlayToPage({target:s,animation:c,duration:u}):(n.doStopAutoSkip(),i(s,{animation:c,duration:u})))}},n.renderInviteDialog=function(){var e=window.location.search,t=-1!==window.location.href.indexOf("phoneUrl=true");if(e.indexOf("from=ux2018")>0)return null;var o=n.state.showInviteDialog,i=n.props,l=i.app;return i.isInvitation&&o&&!t?a.createElement("div",{className:r.default("invitation-wrapper",{isTW:y.isTW})},a.createElement(c.Dialog,{okText:p.default("share.accept"),cancelText:p.default("share.onlyViewProject"),onOk:n.onClickInviteOk,showCancel:!0,onCancel:function(){n.setState({showInviteDialog:!1})}},a.createElement("div",{className:"invitation-content"},a.createElement("div",{className:"content"},a.createElement("p",null,p.default("share.invitationTitle",l.teamName)),a.createElement("p",null,p.default("share.invitationText")))))):null},n.renderNoPage=function(){var e=n.props,t=e.app,o=e.user,i=e.teamInfo,r=e.getTeamInfo;i.id||r(t.teamID);var l=i.roleInTeam;if(!o.user||!v.validatePermission(v.MODE_STORY_BOARD,v.OPERATE_ADD,l,!1))return a.createElement(d.default,null,p.default("preview.noPage.notTeamMember"));var s="/app/"+t._id+"/storyboard";return a.createElement(d.default,{url:s,onClick:function(){localStorage.removeItem("closeUpLoadTip")}},a.createElement("div",null,p.default("preview.noPage.isTeamMember"),a.createElement(c.Link,{className:"add-page-link",href:s},p.default("preview.noPage.addPage"))))},n.isFirstLoaded=!0,n.state={linkFadeIn:!1,needPerspective:!1,showInviteDialog:!0,controlPanelType:m.SHOW_DO_ONE_PANEL,overlayAnimation:"",animationFlag:"",interactionFlag:null,showPhoneTree:!1},n.onMobileToggleTree=n.onMobileToggleTree.bind(n),n.onMobileTouchStart=n.onMobileTouchStart.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.loadAppPreviewData,e.loadLocalPreviewData),n=e.selectedPage,o=e.startPage;t(JSON.parse(window.data),n,o)}},{key:"componentWillReceiveProps",value:function(e){var t=e.app,n=e.nextPage,o=e.user,a=e.isInvitation,i=e.isInTeam,r=e.isInApp,l=e.isJoined;if(n){var s=n.animate.animation,c=this.state.animationFlag;c||this.setState({animationFlag:s}),"flipInX"===c||"flipOutX"===c?this.setState({needPerspective:!0}):this.setState({needPerspective:!1})}if(t){var u=t.inviteAsCollaborator,d=m.SHOW_DO_ONE_PANEL;o.user?(i||r||l)&&(d=m.SHOW_TEAM_PANEL):d=u?m.SHOW_INVITATION_PANEL:d,a&&(d=m.SHOW_INVITATION_PANEL),this.setState({controlPanelType:d})}}},{key:"componentDidUpdate",value:function(){this.props.loaded&&(this.isFirstLoaded&&this.doStartAutoSkip(),this.isFirstLoaded=!1)}},{key:"onMobileToggleTree",value:function(){var e=this.state.showPhoneTree;this.setState({showPhoneTree:!e})}},{key:"onMobileTouchStart",value:function(){return b=setTimeout(this.onMobileToggleTree,500),!1}},{key:"onMobileTouchMove",value:function(){return clearTimeout(b),!1}},{key:"onMobileTouchEnd",value:function(){clearTimeout(b),b=0}},{key:"render",value:function(){var e=this.props,t=e.childNode,n=e.loaded,o=e.currentPage,i=e.clear,r=e.message,l=e.mode,s=e.redirectTo,u=e.onSelectPage,d=e.loadApp,f=this.state,g=f.linkFadeIn,m=f.needPerspective,v=f.controlPanelType,y=f.overlayAnimation,w=f.showPhoneTree;if(r)return setTimeout(function(){window.location.href="/app"},5e3),a.createElement(c.Dialog,{okText:p.default("preview.goHome"),showClose:!1,onOk:function(){window.location.href="/app"}},a.createElement("div",{className:"message-wrap"},a.createElement("div",{className:"message-icon"},a.createElement(c.Icon,{cls:"tag_exclamation",color:"#fe4066"})),r.content));if(n&&!o)return this.renderNoPage();if(!n||!t)return null;var b=t;return a.createElement(h.default.Provider,{value:{onPagePan:this.handlePagePan,onPagePanDone:this.handlePagePanDone,onPageGesture:this.handlePageGesture,pageWhetherExist:this.pageWhetherExist,onAnimationEnd:this.handleAnimateEnd,onTransitionEnd:this.onTransitionEnd,onLinkClick:this.handleInteractionClick,onLinkFadeInEnd:this.handleLinkAreaFadeInEnd,onLinkPan:this.handleInteractionPan,onLinkPanDone:this.handleInteractionPanDone}},a.createElement(a.Fragment,null,a.createElement(b,Object.assign({},this.props,{linkFadeIn:g,onPageSelected:this.handleSkipToPage,onPreLoadImage:this.doPreLoadImage,onLinkAreaFadeInStart:this.handleLinkAreaFadeInStart,onUnmount:i,needPerspective:m,mode:l,redirectTo:s,onSelectPage:u,loadApp:d,controlPanelType:v,onClickInviteOk:this.onClickInviteOk,overlayAnimation:y,showPhoneTree:w,onMobileToggleTree:this.onMobileToggleTree,onMobileTouchStart:this.onMobileTouchStart,onMobileTouchMove:this.onMobileTouchMove,onMobileTouchEnd:this.onMobileTouchEnd})),this.renderInviteDialog()))}}]),t}();P.defaultProps={app:null,currentPage:null,nextPage:null,loaded:!1,interactions:null,childNode:null,skipTo:null,skipDone:null,preLoad:null,goBackWard:null,goForWard:null,goHome:null,loadAppPreviewData:null,loadLocalPreviewData:null,autoSkipToPage:null,clear:null,zip:!1,message:null};var E=i.connect(function(e,t){var n=e.preview,o=e.user,a=e.teamInfo,i=t.location.state&&t.location.state.startPage||"home",r=t.location.state&&t.location.state.selectedPage||"",l=t.location.state&&t.location.state.isFromApps,s=n.app,c=n.interactions,u=n.currentPage,d=n.nextPage,p=n.loaded,f=n.zip,h=n.message,g=n.isInvitation,m=n.overlayPage,v=n.isInTeam,y=n.isInApp,w=n.notFromInvitation,b=n.isJoined,P=void 0;if(p){var E=s.homepage,S=void 0;u&&(S=u,E=u._id),m&&(S=m,E=m._id),E&&(P=c.filter(function(e){return S.interactions.includes(e._id)&&e.target!==e.pageID}))}return{app:s,loaded:p,preview:n,currentPage:u,nextPage:d,overlayPage:m,interactions:P,isInvitation:g,isInTeam:v,isInApp:y,zip:f,message:h,user:o,teamInfo:a,selectedPage:r,startPage:i,notFromInvitation:w,isFromApps:l,isJoined:b}},function(e,t){var n=t.match.params.shareID;return{loadLocalPreviewData:function(t,n,o){e(u.default.preview.loadLocalPreviewData(t,n,o))},loadAppPreviewData:function(t,o){e(u.default.preview.loadPreviewData(n,t,o))},skipTo:function(t){e(u.default.preview.skipTo(t))},skipDone:function(t){e(u.default.preview.skipDone(t))},goHome:function(){e(u.default.preview.goHome())},goBackWard:function(){e(u.default.preview.goBackWard())},goForWard:function(){e(u.default.preview.goForWard())},preLoad:function(t){e(u.default.preview.preLoad(t))},autoSkipToPage:function(t,n){e(u.default.preview.autoSkipToPage(t,n))},pageSkipToPage:function(t,n){e(u.default.preview.pageSkipToPage(t,n))},clear:function(){e(u.default.preview.clear())},onSelectPage:function(t){e(u.default.tree.selectPage(t))},loadApp:function(t,n){e(u.default.app.loadApp(t,n))},onJoinShareApp:function(){e(u.default.preview.joinShareApp(n))},overlayTo:function(t){e(u.default.preview.overlayTo(t))},panTo:function(t,n){e(u.default.preview.panTo(t,n))},panDone:function(t,n){e(u.default.preview.panDone(t,n))},goPrevPage:function(){e(u.default.preview.goPrevPage())},goNextPage:function(){e(u.default.preview.goNextPage())},getTeamInfo:function(t){e(u.default.preview.getTeamInfo(t))}}})(P);t.default=function(e){return a.createElement(f.default.Consumer,null,function(t){var n=t.redirectTo;return a.createElement(E,Object.assign({},e,{redirectTo:n}))})}},1969:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1970);n(1971);var i=function(e){var t=e.url,n=e.onClick,i=e.children;return o.createElement("div",{className:"no-page",onClick:n},o.createElement("div",{className:"no-page-icon"},t?o.createElement("a",{href:t},o.createElement("img",{src:a})):o.createElement("img",{src:a}),o.createElement("div",{className:"no-page-msg"},i)))};i.defaultProps={url:"",onClick:null,children:""},t.default=i},1970:function(e,t,n){e.exports=n.p+"assets/no-page.b6fc0964aab54e1cd2848897a7273127.svg"},1971:function(e,t,n){},1972:function(e,t,n){}}]);